(this["webpackJsonpspeedgolf-react"]=this["webpackJsonpspeedgolf-react"]||[]).push([[0],{24:function(e,t,s){},27:function(e,t,s){"use strict";s.r(t);var n=s(0),r=s(1),a=s.n(r),o=s(13),c=s.n(o),i=(s(21),s(22),s(23),s(24),s(6)),l=s.n(i),u=s(7),d=s(2),p=s(3),h=s(5),j=s(4),b={LOGIN:"LoginMode",SURVEY_MANAGEMENT:"SurveyMode",SURVEY_MANAGEMENT_RESPONSES:"SurveyModeResponses",SURVEY_MANAGEMENT_CREATE:"SurveyModeCreate",SURVEY_MANAGEMENT_EDIT:"SurveyModeEdit",SURVEY_MANAGEMENT_CREATE_SURVEY:"SurveyModeCreateSurvey",SURVEY_MANAGEMENT_SEARCH:"SurveyModeSearch",SURVEY_MANAGEMENT_SEARCH_SURVEYS:"SurveyModeSurveysSearch",ROUNDS:"RoundsMode",ROUNDS_LOGROUND:"RoundsMode-LogRound",ROUNDS_EDITROUND:"RoundsMode-EditRound",COURSES:"CoursesMode",COURSE_CREATE:"AddCourses",COURSES_DELETE:"DeleteCourses",COURSES_EDIT:"EditCourses",STUDENTS:"StudentsMode",STUDENTS_UPLOAD:"UploadStudents",STUDENTS_CREATE:"AddStudents"};Object.freeze(b);var m=b,O=s.p+"static/media/favicon.506574b1.png",f=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){var e;Object(d.a)(this,s);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).getMenuBtnIcon=function(){return e.props.mode===m.ROUNDS_LOGROUND||e.props.mode===m.ROUNDS_EDITROUND?"fa fa-arrow-left":e.props.menuOpen?"fa fa-times":"fa fa-bars"},e.handleMenuBtnClick=function(){e.props.mode===m.ROUNDS_LOGROUND||e.props.mode===m.ROUNDS_EDITROUND?e.props.changeMode(m.ROUNDS):e.props.mode!=m.LOGIN&&e.props.toggleMenuOpen()},e}return Object(p.a)(s,[{key:"render",value:function(){return Object(n.jsx)("div",{id:"navBarMenu",className:"navbar",children:Object(n.jsxs)("span",{className:"navbar-items",children:[Object(n.jsx)("button",{id:"menuBtn",className:"sidemenu-btn",onClick:this.handleMenuBtnClick,children:Object(n.jsx)("span",{id:"menuBtnIcon",className:"sidemenu-btn-icon "+this.getMenuBtnIcon()})}),Object(n.jsx)("img",{src:O,alt:"Kliks Logo",height:"38px",width:"38px"}),Object(n.jsxs)("span",{className:"navbar-title",children:["\xa0",this.props.title]})]})})}}]),s}(a.a.Component),x=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){var e;Object(d.a)(this,s);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).setGeneralMode=function(e){return m.SURVEY_MANAGEMENT===e||m.SURVEY_MANAGEMENT_CREATE===e||m.SURVEY_MANAGEMENT_CREATE_SURVEY===e||m.SURVEY_MANAGEMENT_RESPONSES===e||m.SURVEY_MANAGEMENT_SEARCH===e||m.SURVEY_MANAGEMENT_SEARCH_SURVEYS===e?m.SURVEY_MANAGEMENT:e},e.renderModeMenuItems=function(){switch(e.setGeneralMode(e.props.mode)){case m.SURVEY_MANAGEMENT||m.SURVEY_MANAGEMENT_CREATE||m.SURVEY_MANAGEMENT_RESPONSES||m.SURVEY_MANAGEMENT_SEARCH||m.SURVEY_MANAGEMENT_CREATE_SURVEY||m.SURVEY_MANAGEMENT_SEARCH_SURVEYS:return Object(n.jsxs)("div",{children:[Object(n.jsxs)("a",{className:"sidemenu-item",id:"surveyManagement-MainPage",onClick:function(t){t.preventDefault(),e.props.changeMode(m.SURVEY_MANAGEMENT)},children:[Object(n.jsx)("span",{className:"fa fa-bolt"}),"\xa0Active Questions"]}),Object(n.jsxs)("a",{className:"sidemenu-item ",id:"surveyManagement-search",onClick:function(t){t.preventDefault(),e.props.changeMode(m.SURVEY_MANAGEMENT_SEARCH)},children:[Object(n.jsx)("span",{className:"fa fa-search"}),"\xa0Search Questions"]}),Object(n.jsxs)("a",{className:"sidemenu-item ",id:"surveyManagement-searchSurvey",onClick:function(t){t.preventDefault(),e.props.changeMode(m.SURVEY_MANAGEMENT_SEARCH_SURVEYS)},children:[Object(n.jsx)("span",{className:"fa fa-search"}),"\xa0Search Surveys"]}),Object(n.jsxs)("a",{className:"sidemenu-item ",id:"surveyManagement-create",onClick:function(t){t.preventDefault(),e.props.changeMode(m.SURVEY_MANAGEMENT_CREATE)},children:[Object(n.jsx)("span",{className:"fa fa-plus"}),"\xa0Create Questions"]}),Object(n.jsxs)("a",{className:"sidemenu-item ",id:"surveyManagement-createSurvey",onClick:function(t){t.preventDefault(),e.props.changeMode(m.SURVEY_MANAGEMENT_CREATE_SURVEY)},children:[Object(n.jsx)("span",{className:"fa fa-plus"}),"\xa0Create Survey"]}),Object(n.jsxs)("a",{className:"sidemenu-item ",id:"surveyManagement-responses",onClick:function(t){t.preventDefault(),e.props.changeMode(m.SURVEY_MANAGEMENT_RESPONSES)},children:[Object(n.jsx)("span",{className:"fa fa-folder-open"}),"\xa0Responses"]})]});case m.ROUNDS:return Object(n.jsxs)("div",{children:[Object(n.jsxs)("a",{className:"sidemenu-item",children:[Object(n.jsx)("span",{className:"fa fa-plus"}),"\xa0Log New Round"]}),Object(n.jsxs)("a",{className:"sidemenu-item",children:[Object(n.jsx)("span",{className:"fa fa-search"}),"\xa0Search Rounds"]})]});case m.COURSES:case m.COURSES_CREATE:return"Instructor"===e.props.userType?Object(n.jsxs)("div",{children:[Object(n.jsxs)("a",{className:"sidemenu-item",onClick:function(t){t.preventDefault(),e.props.changeMode(m.COURSES)},children:[Object(n.jsx)("span",{className:"fa fa-folder-open",id:"viewCoursesLink"}),"\xa0View Courses"]}),Object(n.jsxs)("a",{className:"sidemenu-item",onClick:function(t){t.preventDefault(),e.props.changeMode(m.COURSES_CREATE)},children:[Object(n.jsx)("span",{className:"fa fa-plus",id:"addCourseLink"}),"\xa0Add a Course"]})]}):Object(n.jsx)("div",{children:Object(n.jsxs)("a",{className:"sidemenu-item",onClick:function(t){t.preventDefault(),e.props.changeMode(m.COURSES)},children:[Object(n.jsx)("span",{className:"fa fa-folder-open",id:"viewCoursesLink"}),"\xa0View Courses"]})});case m.STUDENTS:case m.STUDENTS_CREATE:case m.STUDENTS_UPLOAD:return"Instructor"===e.props.userType?Object(n.jsxs)("div",{children:[Object(n.jsxs)("a",{className:"sidemenu-item",onClick:function(t){t.preventDefault(),e.props.changeMode(m.COURSES)},children:[Object(n.jsx)("span",{className:"fa fa-folder-open",id:"viewCoursesLink"}),"\xa0View Courses"]}),Object(n.jsxs)("a",{className:"sidemenu-item",onClick:function(t){t.preventDefault(),e.props.changeMode(m.STUDENTS_CREATE)},children:[Object(n.jsx)("span",{className:"fa fa-plus",id:"addStudentLink"}),"\xa0Add a Student"]}),Object(n.jsxs)("a",{className:"sidemenu-item",onClick:function(t){t.preventDefault(),e.props.changeMode(m.STUDENTS_UPLOAD)},children:[Object(n.jsx)("span",{className:"fa fa-upload",id:"uploadStudentsLink"}),"\xa0Upload Students"]})]}):Object(n.jsx)("div",{children:Object(n.jsxs)("a",{className:"sidemenu-item",onClick:function(t){t.preventDefault(),e.props.changeMode(m.COURSES)},children:[Object(n.jsx)("span",{className:"fa fa-folder-open",id:"viewCoursesLink"}),"\xa0View Courses"]})});default:return null}},e}return Object(p.a)(s,[{key:"render",value:function(){return Object(n.jsxs)("div",{id:"sidemenu",className:"sidemenu "+(this.props.menuOpen?"sidemenu-open":"sidemenu-closed"),onClick:this.props.toggleMenuOpen,children:[Object(n.jsxs)("div",{className:"sidemenu-title",children:[Object(n.jsx)("img",{src:this.props.profilePicURL,height:"60",width:"60"}),Object(n.jsxs)("span",{id:"userID",className:"sidemenu-userID",children:["\xa0",this.props.displayName]})]}),this.renderModeMenuItems(),this.props.localAccount?Object(n.jsxs)("a",{id:"accountBtn",className:"sidemenu-item",onClick:this.props.editAccount,children:[Object(n.jsx)("span",{className:"fa fa-user"}),"\xa0Account"]}):null,Object(n.jsxs)("a",{id:"aboutBtn",className:"sidemenu-item",onClick:this.props.showAbout,children:[Object(n.jsx)("span",{className:"fa fa-info-circle"}),"\xa0About"]}),Object(n.jsxs)("a",{id:"logOutBtn",className:"sidemenu-item",onClick:this.props.logOut,children:[Object(n.jsx)("span",{className:"fa fa-sign-out-alt"}),"\xa0Log Out"]})]})}}]),s}(a.a.Component),v=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){return Object(d.a)(this,s),t.apply(this,arguments)}return Object(p.a)(s,[{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:"modebar"+(this.props.mode===m.LOGIN?" invisible":this.props.menuOpen?" ignore-click visible":" visible"),children:[Object(n.jsxs)("a",{className:this.props.mode===m.SURVEY_MANAGEMENT?" item-selected":null,onClick:function(){return e.props.changeMode(m.SURVEY_MANAGEMENT)},children:[Object(n.jsx)("span",{className:"modebaricon fa fa-th-list"}),Object(n.jsx)("span",{className:"modebar-text",children:"Survey Management"})]}),Object(n.jsxs)("a",{className:this.props.mode===m.ROUNDS||this.props.mode===m.ROUNDS_EDITROUND||this.props.mode===m.ROUNDS_LOGROUND?" item-selected":null,onClick:function(){return e.props.changeMode(m.ROUNDS)},children:[Object(n.jsx)("span",{className:"modebar-icon  fa fa-history"}),Object(n.jsx)("span",{className:"modebar-text",children:"Dashboard"})]}),Object(n.jsxs)("a",{id:"CoursesMode",className:this.props.mode===m.COURSES?" item-selected":null,onClick:function(){return e.props.changeMode(m.COURSES)},children:[Object(n.jsx)("span",{className:"modebar-icon  fa fa-flag"}),Object(n.jsx)("span",{className:"modebar-text",children:"Courses"})]})]})}}]),s}(a.a.Component),y=s(8),g=s(9),N=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){var e;return Object(d.a)(this,s),(e=t.call(this)).handleChange=function(){var t=e.emailRef.current.value===e.props.email;t!=e.state.emailMatches&&e.setState({emailMatches:t})},e.emailRef=a.a.createRef(),e.state={emailMatches:!1},e}return Object(p.a)(s,[{key:"componentDidMount",value:function(){this.emailRef.current.focus()}},{key:"render",value:function(){return Object(n.jsx)("div",{id:"aboutModal",className:"modal",role:"dialog",children:Object(n.jsxs)("div",{className:"modal-content",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("center",{children:Object(n.jsx)("h3",{className:"modal-title",children:Object(n.jsx)("b",{children:"Confirm Account Deletion"})})}),Object(n.jsx)("button",{id:"modalClose",className:"modal-close",onClick:this.props.close,children:"\xd7"})]}),Object(n.jsxs)("div",{className:"modal-body",children:[Object(n.jsxs)("p",{children:["Do you really want to delete your account? ",Object(n.jsx)("br",{}),Object(n.jsx)("i",{children:"This action cannot be undone."})]}),Object(n.jsxs)("label",{children:["Confirm Email (",this.props.email,"):",Object(n.jsx)("br",{}),Object(n.jsx)("input",{className:"form-center",type:"text",ref:this.emailRef,onChange:this.handleChange})]}),Object(n.jsx)("br",{})]}),Object(n.jsxs)("div",{className:"modal-footer",children:[Object(n.jsx)("button",{className:"btn btn-danger",onClick:this.props.deleteAccount,disabled:!this.state.emailMatches,children:"Yes, Delete My Account"}),Object(n.jsx)("button",{className:"btn btn-secondary",onClick:this.props.close,children:"No, Cancel"})]})]})})}}]),s}(a.a.Component),S=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).checkDataValidity=function(){n.state.accountName.endsWith("@wsu.edu")?n.newUserRef.current.setCustomValidity(""):n.newUserRef.current.setCustomValidity("Email needs to be a wsu email: @wsu.edu"),n.state.password!=n.state.passwordRepeat?n.repeatPassRef.current.setCustomValidity("This password must match password entered in previous field."):n.repeatPassRef.current.setCustomValidity("")},n.handleChange=function(e){var t,s=null==n.origAccountInfo||n.formIsUpdated(e.target.name,e.target.value);if("profilePic"===e.target.name)if(0==e.target.value.length)n.setState({profilePicURL:"https://icon-library.net//images/default-profile-icon/default-profile-icon-24.jpg",formUpdated:s},n.checkDataValidity);else{var r=Object(g.a)(n),a=new FileReader;a.readAsDataURL(n.profilePicRef.current.files[0]),a.addEventListener("load",(function(){r.setState({profilePicURL:this.result,formUpdated:s},this.checkDataValidity)})),console.log(n.state.profilePicURL)}else n.setState((t={},Object(y.a)(t,e.target.name,e.target.value),Object(y.a)(t,"formUpdated",s),t),n.checkDataValidity)},n.formIsUpdated=function(e,t){return n.origAccountInfo[e]!=t||("displayName"!=e&&n.state.displayName!=n.origAccountInfo.displayName||("userType"!=e&&n.state.userType!=n.origAccountInfo.userType||("profilePicURL"!=e&&n.state.profilePicURL!=n.origAccountInfo.profilePicURL||("password"!=e&&n.state.password!==n.origAccountInfo.password||("passwordRepeat"!=e&&n.state.passwordRepeat!==n.origAccountInfo.passwordRepeat||("securityQuestion"!=e&&n.state.securityQuestion!==n.origAccountInfo.securityQuestion||"securityAnswer"!=e&&n.state.securityAnswer!==n.origAccountInfo.securityAnswer))))))},n.setDefaultuserType=function(e){n.setState({userType:e.target.value}),n.setState({displayName:e.target.value})},n.handleSubmit=function(){var e=Object(u.a)(l.a.mark((function e(t){var s,r,a,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s={displayName:n.state.displayName,userType:n.state.userType,password:n.state.password,profilePicURL:n.state.profilePicURL,securityQuestion:n.state.securityQuestion,securityAnswer:n.state.securityAnswer},r="/users/"+n.state.accountName,!n.props.create){e.next=17;break}return e.next=6,fetch(r,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(s)});case 6:if(200!=(a=e.sent).status){e.next=11;break}n.props.done("New account created! Enter credentials to log in.",!1),e.next=15;break;case 11:return e.next=13,a.text();case 13:o=e.sent,n.props.done(o,!1);case 15:e.next=28;break;case 17:return e.next=19,fetch(r,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify(s)});case 19:if(200!=(a=e.sent).status){e.next=24;break}n.props.done("User Account Updated!",!1),e.next=28;break;case 24:return e.next=26,a.text();case 26:c=e.sent,n.props.done(c,!1);case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.deleteAccount=Object(u.a)(l.a.mark((function e(){var t,s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/users/"+n.state.accountName,e.next=3,fetch(t,{method:"DELETE"});case 3:if(200!=(s=e.sent).status){e.next=8;break}n.props.done("Account '"+n.state.accountName+"' has been deleted.",!0),e.next=12;break;case 8:return e.next=10,s.text();case 10:r=e.sent,n.props.done(r,!1);case 12:n.setState({confirmDelete:!1});case 13:case"end":return e.stop()}}),e)}))),n.confirmDeleteAccount=function(e){e.preventDefault(),n.setState({confirmDelete:!0})},n.origAccountInfo=null,n.newUserRef=a.a.createRef(),n.repeatPassRef=a.a.createRef(),n.profilePicRef=a.a.createRef(),n.state={accountName:"",displayName:"",userType:"",profilePicURL:"https://icon-library.net//images/default-profile-icon/default-profile-icon-24.jpg",password:"",passwordRepeat:"",securityQuestion:"",securityAnswer:"",formUpdated:!1,confirmDelete:!1},n}return Object(p.a)(s,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,s,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.create){e.next=12;break}return t="/users/"+this.props.userId,e.next=4,fetch(t);case 4:return s=e.sent,e.next=7,s.json();case 7:n=e.sent,r=JSON.parse(n),this.origAccountInfo=r,this.origAccountInfo.passwordRepeat=r.password,this.setState({accountName:this.props.userId,displayName:r.displayName,userType:r.userType,profilePicURL:r.profilePicURL,password:r.password,passwordRepeat:r.password,securityQuestion:r.securityQuestion,securityAnswer:r.securityAnswer});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:"modal",role:"dialog",children:[Object(n.jsx)("div",{className:"modal-dialog modal-lg"}),Object(n.jsxs)("div",{className:"modal-content form-center",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("h3",{children:Object(n.jsx)("b",{children:this.props.create?"Create New Account":"Edit Account"})}),Object(n.jsx)("button",{className:"modal-close",onClick:this.props.cancel,children:"\xd7"})]}),Object(n.jsx)("div",{className:"modal-body",children:Object(n.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(n.jsxs)("label",{children:["Email:",Object(n.jsx)("input",{autocomplete:"off",disabled:!this.props.create,className:"form-control form-text form-center",name:"accountName",type:"email",size:"35",placeholder:"Enter Email Address",pattern:"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}",required:!0,ref:this.newUserRef,value:this.state.accountName,onChange:this.handleChange,onBlur:this.setDefaultuserType})]}),Object(n.jsx)("br",{}),Object(n.jsxs)("label",{children:["Password:",Object(n.jsx)("input",{autocomplete:"off",className:"form-control form-text form-center",name:"password",type:"password",size:"35",placeholder:"Enter Password",pattern:"(?=^.{8,}$)((?=.*\\d)|(?=.*\\W+))(?![.\\n])(?=.*[A-Z])(?=.*[a-z]).*$",required:!0,value:this.state.password,onChange:this.handleChange})]}),Object(n.jsx)("br",{}),Object(n.jsxs)("label",{children:["Repeat Password:",Object(n.jsx)("input",{className:"form-control form-text form-center",name:"passwordRepeat",type:"password",size:"35",placeholder:"Repeat Password",required:!0,ref:this.repeatPassRef,value:this.state.passwordRepeat,onChange:this.handleChange})]}),Object(n.jsx)("br",{}),Object(n.jsxs)("label",{children:["Display Name:",Object(n.jsx)("input",{className:"form-control form-text form-center",name:"displayName",type:"text",size:"30",placeholder:"Display Name",required:!0,value:this.state.displayName,onChange:this.handleChange})]}),Object(n.jsx)("br",{}),Object(n.jsxs)("label",{children:["Account Type:",Object(n.jsxs)("select",{name:"userType",value:this.state.userType,className:"form-control form-center",onChange:this.handleChange,children:[Object(n.jsx)("option",{value:"SelectOne",children:"Select One"}),Object(n.jsx)("option",{value:"Student",children:"Student"}),Object(n.jsx)("option",{value:"Instructor",children:"Instructor"})]})]}),Object(n.jsx)("br",{}),Object(n.jsxs)("label",{children:["Profile Picture:",Object(n.jsx)("br",{}),Object(n.jsx)("input",{className:"form-control form-text form-center",name:"profilePic",type:"file",accept:"image/x-png,image/gif,image/jpeg",ref:this.profilePicRef,value:this.state.profilePic,onChange:this.handleChange}),Object(n.jsx)("img",{src:""!=this.state.profilePicURL?this.state.profilePicURL:this.state.profilePicDataURL,height:"60",width:"60"})]}),Object(n.jsx)("br",{}),Object(n.jsxs)("label",{children:["Security Question:",Object(n.jsx)("textarea",{className:"form-control form-text form-center",name:"securityQuestion",size:"35",placeholder:"Security Question",rows:"2",cols:"35",maxLength:"100",required:!0,value:this.state.securityQuestion,onChange:this.handleChange})]}),Object(n.jsx)("br",{}),Object(n.jsxs)("label",{children:["Answer to Security Question:",Object(n.jsx)("textarea",{className:"form-control form-text form-center",name:"securityAnswer",type:"text",placeholder:"Answer",rows:"2",cols:"35",maxLength:"100",required:!0,value:this.state.securityAnswer,onChange:this.handleChange})]}),Object(n.jsx)("br",{}),this.props.create?null:Object(n.jsx)("button",{className:"btn btn-small btn-danger",onClick:this.confirmDeleteAccount,children:"Delete Account..."}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsxs)("button",{role:"submit",disabled:!this.state.formUpdated,className:"btn btn-primary btn-color-theme modal-submit-btn",children:[Object(n.jsx)("span",{className:this.props.create?"fa fa-user-plus":"fa fa-user"}),"\xa0",this.props.create?"Create Account":"Update Account"]})]})})]}),this.state.confirmDelete?Object(n.jsx)(N,{email:this.state.accountName,deleteAccount:this.deleteAccount,close:function(){return e.setState({confirmDelete:!1})}}):null]})}}]),s}(a.a.Component),C=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){var e;return Object(d.a)(this,s),(e=t.call(this)).handleSubmit=function(t){t.preventDefault(),e.resetPasswordRef.current.value===e.resetPasswordRepeatRef.current.value?e.props.resetPassword(e.resetPasswordRef.current.value):(e.resetPasswordRepeatRef.current.focus(),e.setState({errorMsg:"The passwords you entered do not match. Please try again."}))},e.checkForSubmit=function(t){"Enter"===t.code&&(t.preventDefault(),e.handleSubmit())},e.resetPasswordRef=a.a.createRef(),e.resetPasswordRepeatRef=a.a.createRef(),e.state={errorMsg:""},e}return Object(p.a)(s,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"modal",role:"dialog",children:Object(n.jsx)("div",{className:"modal-dialog modal-lg",children:Object(n.jsxs)("div",{className:"modal-content",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("h3",{className:"col-12 modal-title text-center",children:Object(n.jsx)("b",{children:"Reset Password"})}),Object(n.jsx)("button",{className:"modal-close",onClick:this.props.cancelResetPassword,children:"\xd7"})]}),Object(n.jsxs)("div",{className:"modal-body",children:[""!=this.state.errorMsg?Object(n.jsx)("p",{className:"emphasis",children:this.state.errorMsg}):null,Object(n.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(n.jsxs)("label",{children:["New Password:",Object(n.jsx)("input",{type:"password",id:"NewPassword",placeholder:"Enter new password",pattern:"(?=^.{8,}$)((?=.*\\d)|(?=.*\\W+))(?![.\\n])(?=.*[A-Z])(?=.*[a-z]).*$",className:"form-control form-text",ref:this.resetPasswordRef})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Repeat New Password:",Object(n.jsx)("input",{type:"password",id:"RepeatPassword",placeholder:"Repeat new password",className:"form-control form-text",onKeyUp:this.checkForSubmit,ref:this.resetPasswordRepeatRef})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("button",{role:"submit",id:"PasswordButton",className:"btn btn-primary btn-color-theme form-submit-btn",children:[Object(n.jsx)("span",{className:"fa fa-key"}),"\xa0Reset Password"]})]})]})]})})})}}]),s}(a.a.Component),R=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){var e;return Object(d.a)(this,s),(e=t.call(this)).handleLookUpAccount=function(){var t=Object(u.a)(l.a.mark((function t(s){var n,r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.preventDefault(),t.next=3,fetch("/users/"+e.emailRef.current.value);case 3:if(200!=(n=t.sent).status){t.next=12;break}return t.next=7,n.json();case 7:r=t.sent,"local"===(a=JSON.parse(r)).authStrategy?e.props.getSecurityAnswer(a.id,a.securityQuestion,a.securityAnswer):e.setState({errorMsg:"That account is authenticated through "+a.authStrategy+". Please log in to "+a.authStrategy+" to reset the password."}),t.next=13;break;case 12:e.setState({errorMsg:"Sorry, there is no account associated with '"+e.emailRef.current.value+"'."});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.emailRef=a.a.createRef(),e.state={errorMsg:""},e}return Object(p.a)(s,[{key:"render",value:function(){var e,t=this;return Object(n.jsx)("div",{className:"modal",role:"dialog",children:Object(n.jsx)("div",{className:"modal-dialog modal-lg",children:Object(n.jsxs)("div",{className:"modal-content",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("h3",{className:"col-12 modal-title text-center",children:Object(n.jsx)("b",{children:"Look Up Account"})}),Object(n.jsx)("button",{className:"modal-close",onClick:function(){t.props.cancelResetPassword()},children:"\xd7"})]}),Object(n.jsxs)("div",{className:"modal-body",children:[""!=this.state.errorMsg?Object(n.jsx)("p",{className:"emphasis",children:this.state.errorMsg}):null,Object(n.jsxs)("form",{onSubmit:this.handleLookUpAccount,children:[Object(n.jsxs)("label",{children:["Account Email Address:",Object(n.jsx)("input",(e={ref:this.emailRef,className:"form-control form-text",id:"AccountEmail",type:"email",size:"35",placeholder:"Enter Email Address",pattern:"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}"},Object(y.a)(e,"ref",this.emailRef),Object(y.a)(e,"required",!0),e))]}),Object(n.jsx)("p",{}),Object(n.jsxs)("button",{type:"submit",id:"AccountButton",className:"btn btn-primary btn-color-theme form-submit-btn",children:[Object(n.jsx)("span",{className:"fa fa-search"}),"\xa0Look Up Account"]})]})]})]})})})}}]),s}(a.a.Component),E=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){var e;return Object(d.a)(this,s),(e=t.call(this)).handleSubmit=function(t){t.preventDefault(),e.securityAnswerRef.current.value===e.props.answer?e.props.getNewPassword():(e.securityAnswerRef.current.focus(),e.setState({errorMsg:"Sorry, that is not the correct answer to the security question. Try again."}))},e.securityAnswerRef=a.a.createRef(),e.state={errorMsg:""},e}return Object(p.a)(s,[{key:"componentDidMount",value:function(){this.securityAnswerRef.current.focus()}},{key:"render",value:function(){return Object(n.jsx)("div",{className:"modal",role:"dialog",children:Object(n.jsx)("div",{className:"modal-dialog modal-lg",children:Object(n.jsxs)("div",{className:"modal-content",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("h3",{className:"col-12 modal-title text-center",children:Object(n.jsx)("b",{children:"Answer Security Question"})}),Object(n.jsx)("button",{className:"modal-close",onClick:this.props.cancelResetPassword,children:"\xd7"})]}),Object(n.jsxs)("div",{className:"modal-body",children:[""!=this.state.errorMsg?Object(n.jsx)("p",{className:"emphasis",children:this.state.errorMsg}):null,Object(n.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(n.jsxs)("label",{children:["Security Question:",Object(n.jsx)("textarea",{readOnly:!0,value:this.props.question,className:"form-control form-text",rows:"3",cols:"35"})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Security Answer:",Object(n.jsx)("textarea",{className:"form-control form-text",id:"SecurityAnswer",placeholder:"Enter Security Question Answer",ref:this.securityAnswerRef,rows:"3",cols:"35"})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("button",{role:"submit",id:"SecurityButton",className:"btn btn-primary btn-color-theme form-submit-btn",children:[Object(n.jsx)("span",{className:"fa fa-check"}),"\xa0Verify Answer"]})]})]})]})})})}}]),s}(a.a.Component),w=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){var e;return Object(d.a)(this,s),(e=t.call(this)).handleLoginSubmit=function(){var t=Object(u.a)(l.a.mark((function t(s){var n,r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.preventDefault(),e.setState({loginBtnIcon:"fa fa-spin fa-spinner",loginBtnLabel:"Logging In..."}),n="auth/login?username="+e.emailInputRef.current.value+"&password="+e.passwordInputRef.current.value,t.next=5,fetch(n,{method:"POST"});case 5:if(200!=(r=t.sent).status){t.next=10;break}window.open("/","_self"),t.next=14;break;case 10:return t.next=12,r.text();case 12:a=t.sent,e.setState({loginBtnIcon:"fa fa-sign-in",loginBtnLabel:"Log In",statusMsg:a});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.accountCreateDone=function(t){e.setState({statusMsg:t,showCreateAccountDialog:!1})},e.cancelCreateAccount=function(){e.setState({showCreateAccountDialog:!1})},e.cancelResetPassword=function(){e.resetUserId="",e.resetQ="",e.resetA="",e.setState({showLookUpAccountDialog:!1,showSecurityQuestionDialog:!1,showResetPaswordDialog:!1})},e.handleOAuthLogin=function(e){window.open("/auth/".concat(e),"_self")},e.handleOAuthLoginClick=function(t){var s;e.setState((s={},Object(y.a)(s,t+"Icon","fa fa-spin fa-spinner"),Object(y.a)(s,t+"Label","Connecting..."),s)),setTimeout((function(){return e.handleOAuthLogin(t)}),1e3)},e.getSecurityAnswer=function(t,s,n){e.resetUserId=t,e.resetQ=s,e.resetA=n,e.setState({showLookUpAccountDialog:!1,showSecurityQuestionDialog:!0})},e.getNewPassword=function(){e.setState({showSecurityQuestionDialog:!1,showResetPaswordDialog:!0})},e.resetPassword=function(){var t=Object(u.a)(l.a.mark((function t(s){var n,r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/users/"+e.resetUserId,t.next=3,fetch(n,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify({password:s})});case 3:if(200!=(r=t.sent).status){t.next=8;break}e.setState({showResetPaswordDialog:!1,statusMsg:"Password successfully reset!"}),t.next=12;break;case 8:return t.next=10,r.text();case 10:a=t.sent,e.setState({showResetPasswordDialog:!1,statusMsg:a});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.accountCreateDone=function(t,s){e.setState({statusMsg:t,showCreateAccountDialog:!1})},e.closeStatusMsg=function(){e.setState({statusMsg:""})},e.cancelCreateAccount=function(){e.setState({showCreateAccountDialog:!1})},e.emailInputRef=a.a.createRef(),e.resetUserId="",e.resetQ="",e.resetA="",e.passwordInputRef=a.a.createRef(),e.state={statusMsg:"",loginBtnIcon:"fa fa-sign-in",loginBtnLabel:"Log In",showLookUpAccountDialog:!1,showSecurityQuestionDialog:!1,showResetPaswordDialog:!1,githubIcon:"fa fa-github",githubLabel:"Sign in with GitHub",loginMsg:"",newAccountCreated:!1},e}return Object(p.a)(s,[{key:"componentDidMount",value:function(){this.emailInputRef.current.focus()}},{key:"render",value:function(){var e,t=this;return Object(n.jsx)("div",{id:"LoginMode",children:Object(n.jsxs)("center",{children:[""!=this.state.statusMsg?Object(n.jsxs)("div",{className:"status-msg",children:[Object(n.jsx)("span",{children:this.state.statusMsg}),Object(n.jsx)("button",{className:"modal-close",onClick:this.closeStatusMsg,children:Object(n.jsx)("span",{className:"fa fa-times"})})]}):null,this.state.showLookUpAccountDialog?Object(n.jsx)(R,{cancelResetPassword:this.cancelResetPassword,getSecurityAnswer:this.getSecurityAnswer}):null,this.state.showSecurityQuestionDialog?Object(n.jsx)(E,{cancelResetPassword:this.cancelResetPassword,question:this.resetQ,answer:this.resetA,getNewPassword:this.getNewPassword}):null,this.state.showResetPaswordDialog?Object(n.jsx)(C,{cancelResetPassword:this.cancelResetPassword,resetPassword:this.resetPassword}):null,Object(n.jsxs)("form",{id:"loginInterface",onSubmit:this.handleLoginSubmit,children:[Object(n.jsxs)("label",{htmlFor:"emailInput",style:{padding:0,fontSize:24},children:["Email:",Object(n.jsx)("input",{ref:this.emailInputRef,className:"form-control login-text",type:"email",placeholder:"Enter Email Address",id:"emailInput",pattern:"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}",required:!0})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{htmlFor:"passwordInput",style:{padding:0,fontSize:24},children:["Password:",Object(n.jsx)("input",{ref:this.passwordInputRef,id:"passwordInput",className:"form-control login-text",type:"password",placeholder:"Enter Password",pattern:"[A-Za-z0-9!@#$%^&*()_+\\-]+",required:!0})]}),Object(n.jsx)("p",{className:"bg-danger",id:"feedback",style:{fontSize:16}}),Object(n.jsxs)("button",{id:"loginButton",type:"submit",className:"btn-color-theme btn btn-primary btn-block login-btn",children:[Object(n.jsx)("span",{id:"login-btn-icon",className:this.state.loginBtnIcon}),"\xa0",this.state.loginBtnLabel]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("button",{type:"button",className:"btn btn-link login-link",onClick:function(){t.setState({showCreateAccountDialog:!0})},children:"Create an account"})," |",Object(n.jsx)("button",(e={id:"ResetPassword",type:"button"},Object(y.a)(e,"id","ResetPassword"),Object(y.a)(e,"className","btn btn-link login-link"),Object(y.a)(e,"onClick",(function(){t.setState({showLookUpAccountDialog:!0})})),Object(y.a)(e,"children","Reset your password"),e))]}),Object(n.jsx)("p",{children:Object(n.jsx)("i",{children:"Version CptS 489"})})]}),this.state.showCreateAccountDialog?Object(n.jsx)(S,{create:!0,done:this.accountCreateDone,cancel:this.cancelCreateAccount}):null,this.state.showResetPasswordDialog?Object(n.jsx)(C,{}):null]})})}}]),s}(a.a.Component),D=s(10),A=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).onFileChange=function(e){if(0==e.target.value.length)n.props.setAnswer([n.result]),n.setState({file:""});else{var t=Object(g.a)(n),s=new FileReader;s.readAsDataURL(n.fileRef.current.files[0]),s.addEventListener("load",(function(){t.props.setAnswer([this.result]),t.setState({file:this.result})}))}n.props.setAcceptableAnswerTypes(n.state.selectedOptions),n.state={selectedOptions:[]}},n.handleChange=function(e){var t=e.target.value,s=n.state.selectedOptions;console.log(s),console.log(t),-1===s.indexOf(t)?s.push(t):1===s.length?s=[]:s.splice(s.indexOf(t),1),n.setState({selectedOptions:s},(function(){console.log("String representation:"),console.log(n.state.selectedOptions.toString()),console.log(n.state.selectedOptions)}))},n.fileRef=a.a.createRef(),n.state={file:"",selectedOptions:[]},n}return Object(p.a)(s,[{key:"render",value:function(){return Object(n.jsx)("div",{children:Object(n.jsxs)("center",{children:[Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Acceptable File Types:",Object(n.jsxs)("select",{name:"answerType",multiple:!0,value:this.state.selectedOptions,onChange:this.handleChange,id:"createQuestion-file-fileTypes",className:"form-control form-center",children:[Object(n.jsx)("option",{value:".pdf",children:"pdf"}),Object(n.jsx)("option",{value:".docx",children:"docx"}),Object(n.jsx)("option",{value:".jpg",children:"jpg"}),Object(n.jsx)("option",{value:".jpeg",children:"jpeg"}),Object(n.jsx)("option",{value:".png",children:"png"}),Object(n.jsx)("option",{value:".doc",children:"doc"})]})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["File:",Object(n.jsx)("input",{name:"file",className:"form-control form-center",id:"createQuestion-file-upload",onChange:this.onFileChange,ref:this.fileRef,value:this.state.fileObj,type:"file",accept:this.state.selectedOptions.toString()})]}),Object(n.jsx)("p",{})]})})}}]),s}(a.a.Component),T=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).onResponseChange=function(e){n.props.setAnswer([e.target.value]),n.setState({answer:e.target.value})},n.state={answer:""},n}return Object(p.a)(s,[{key:"render",value:function(){return Object(n.jsx)("div",{children:Object(n.jsxs)("center",{children:[Object(n.jsxs)("label",{children:["Answer:",Object(n.jsx)("textarea",{name:"answer",className:"form-control",rows:"6",cols:"75",id:"createQuestion-freeResponse",placeholder:"Enter answer here",value:this.state.answer,onChange:this.onResponseChange})]}),Object(n.jsx)("p",{})]})})}}]),s}(a.a.Component),M=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var r;return Object(d.a)(this,s),(r=t.call(this,e)).onAddAnswer=function(e){e.preventDefault();var t=r.state.answers;t.push({placeholder:t.length,name:t.length,value:"",id:t.length}),r.setState({answers:t});var s=t.map((function(e){return e.value}));r.props.setAnswer(s)},r.onRemoveAnswer=function(e){e.preventDefault();var t=r.state.answers;if(t.length>0){t.pop(),r.setState({answers:t});var s=t.map((function(e){return e.value}));r.props.setAnswer(s)}else r.props.setAnswer([""])},r.getAnswers=function(){for(var e=[],t=0;t<r.state.answers.length;t++)e.push(Object(n.jsx)("input",{id:t+"-mcOption",placeholder:"Input answer...",onChange:r.onAnswerTextChange,value:r.state.answers[t].value,name:r.state.answers[t].name,"aria-label":"Username","aria-describedby":"basic-addon1",className:"form-control"}));return e},r.onAnswerTextChange=function(e){var t=r.state.answers;t[Number(e.target.name)].value=e.target.value;var s=t.map((function(e){return e.value}));r.props.setAnswer(s),r.setState({answers:t})},r.state={answers:[{placeholder:"",name:0,value:"",id:0}]},r}return Object(p.a)(s,[{key:"render",value:function(){return Object(n.jsx)("div",{children:Object(n.jsxs)("center",{children:[Object(n.jsxs)("div",{className:"mb-3 input-group",style:{width:"20%"},children:[Object(n.jsx)("div",{className:"input-group-prepend",children:Object(n.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:"Answer choice"})}),Object(n.jsx)("div",{id:"multiple-choice-option-answers",children:this.getAnswers()})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("div",{className:"row justify-content-center",children:[Object(n.jsx)("div",{className:"col-md-3",style:{width:"40%"},children:Object(n.jsxs)("button",{type:"button",style:{fontSize:"28px"},id:"createQuestion-mc-addAnswerBtn",onClick:this.onAddAnswer,className:"btn btn-primary btn-color-theme",children:[Object(n.jsx)("span",{className:"fa fa-plus"}),"\xa0Add Answer"]})}),Object(n.jsx)("div",{className:"col-md-3",style:{width:"40%"},children:Object(n.jsxs)("button",{type:"button",style:{fontSize:"28px"},id:"createQuestion-mc-removeAnswerBtn",onClick:this.onRemoveAnswer,className:"btn btn-primary btn-color-theme",children:[Object(n.jsx)("span",{className:"fa fa-plus"}),"\xa0Remove Answer"]})})]}),Object(n.jsx)("p",{})]})})}}]),s}(a.a.Component),I={};I.multipleChoice=M,I.shortAnswer=T,I.fileUpload=A;var U=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var r;Object(d.a)(this,s),(r=t.call(this,e)).handleChange=function(e){var t=e.target.name;r.setState(Object(y.a)({},t,e.target.value),r.checkDataValidity)},r.handleSubmit=function(e){e.preventDefault();var t={questionID:"32534t",questionTitle:r.state.title,questionText:r.state.question,questionType:r.state.answerType,questionAnswers:r.state.answers,acceptableAnswerTypes:r.state.acceptableAnswerTypes,questionActive:r.state.active,responses:[]};setTimeout(r.props.saveQuestion,100,r.state.surveyID,t),r.props.changeMode(m.SURVEY_MANAGEMENT_SEARCH)},r.onAddSurvey=function(e){e.preventDefault(),r.props.changeMode(m.SURVEY_MANAGEMENT_CREATE_SURVEY)},r.setAcceptableAnswerTypes=function(e){r.setState({acceptableAnswerTypes:e})},r.getSurveys=function(){for(var e=[],t=0;t<r.props.surveys.length;t++)e.push(Object(n.jsx)("option",{name:r.props.surveys[t].surveyID,id:r.props.surveys[t].surveyID,value:r.props.surveys[t].surveyID,children:r.props.surveys[t].surveyTitle},r.props.surveys[t].surveyID));return e},r.setAnswer=function(e){r.setState({answers:e})},r.switchHandler=function(){r.setState({active:!r.state.active})},r.handleDropdownChange=function(e){var t,s=e.target.name;r.setState((t={},Object(y.a)(t,s,e.target.value),Object(y.a)(t,"surveyID",e.target.value),t),r.checkDataValidity)},r.checkDataValidity=function(){""==r.state.dropdownOfSurveys?r.surveySelectionRef.current.setCustomValidity("No Survey selected."):r.surveySelectionRef.current.setCustomValidity(""),0==r.state.question.length?r.questionTextRef.current.setCustomValidity("Question does not have a any text."):r.questionTextRef.current.setCustomValidity(""),0==r.state.title.length?r.questionTitleRef.current.setCustomValidity("Question does not have a title."):r.questionTitleRef.current.setCustomValidity("");var e=new Date(Date.now()-6e4*(new Date).getTimezoneOffset());r.state.date<e.toISOString().substr(0,10)?r.dateRef.current.setCustomValidity("Cannot create a question for the past."):r.dateRef.current.setCustomValidity("")};var o=new Date(Date.now()-6e4*(new Date).getTimezoneOffset());return r.questionTextRef=a.a.createRef(),r.questionTitleRef=a.a.createRef(),r.surveySelectionRef=a.a.createRef(),r.dateRef=a.a.createRef(),r.props.mode==m.SURVEY_MANAGEMENT_CREATE?(r.state={dropdownOfSurveys:r.props.surveys.length>0?r.props.surveys[0].surveyID:"",numberOfSurveys:r.props.surveys.length,date:o.toISOString().substr(0,10),answerType:"shortAnswer",question:"",title:"",answers:[],active:!1,acceptableAnswerTypes:[],surveyID:r.props.surveys.length>0?r.props.surveys[0].surveyID:""},r.state.submitIcon="fa fa-save",r.state.submitLabel="Save Question"):(r.state=r.props.startData,r.state.submitIcon="fa fa-edit",r.state.submitLabel="Update Question"),r}return Object(p.a)(s,[{key:"render",value:function(){var e=I[this.state.answerType];return Object(n.jsx)("form",{className:"padded-page",id:"createQuestionMode",onSubmit:this.handleSubmit,children:0==this.props.surveys.length?Object(n.jsxs)("center",{children:[Object(n.jsx)("p",{}),Object(n.jsx)("p",{children:"There are no surveys, please create surveys in order to create questions "}),Object(n.jsx)("p",{}),Object(n.jsxs)("button",{type:"button",style:{width:"50%",fontSize:"36px"},id:"createQuestion-createSurveyBtn",onClick:this.onAddSurvey,className:"btn btn-primary btn-color-theme",children:[Object(n.jsx)("span",{className:"fa fa-plus"}),"\xa0 Add a survey"]})]}):Object(n.jsxs)("center",{children:[Object(n.jsxs)("label",{style:{fontSize:"20px"},children:["Question Title:",Object(n.jsx)("input",{name:"title",id:"createQuestion-title",className:"form-control form-center",value:this.state.title,onChange:this.handleChange,ref:this.questionTitleRef,minLength:1,type:"text"})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{style:{fontSize:"20px"},children:["Question:",Object(n.jsx)("textarea",{name:"question",className:"form-control",rows:"6",cols:"75",placeholder:"Enter Question here",id:"createQuestion-question",value:this.state.question,ref:this.questionTextRef,minLength:1,onChange:this.handleChange})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{style:{fontSize:"20px"},children:["Date:",Object(n.jsx)("input",{name:"date",className:"form-control form-center",type:"date",id:"createQuestion-date",value:this.state.date,onChange:this.handleChange,ref:this.dateRef})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{style:{fontSize:"20px"},children:["Survey:",Object(n.jsx)("select",{name:"dropdownOfSurveys",id:"dropdownOfSurveys",value:this.state.dropdownOfSurveys,onChange:this.handleDropdownChange,onBlur:this.handleDropdownChange,className:"form-control form-center",ref:this.surveySelectionRef,required:!0,children:this.getSurveys()})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{style:{fontSize:"20px"},children:["Activate Question after Creation:",Object(n.jsx)("p",{}),Object(n.jsxs)("label",{className:"switch",children:[Object(n.jsx)("input",{type:"checkbox",id:"createQuestion-togBtn",onClick:this.switchHandler}),Object(n.jsxs)("div",{className:"slider round",children:[Object(n.jsx)("span",{className:"on",style:{textAlign:"left"},children:"YES"}),Object(n.jsx)("span",{className:"off",style:{textAlign:"right"},children:"NO"})]})]})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{style:{fontSize:"20px"},children:["Answer Type:",Object(n.jsxs)("select",{name:"answerType",id:"createQuestion-answerTypeDropdown",value:this.state.answerType,onChange:this.handleChange,className:"form-control form-center",children:[Object(n.jsx)("option",{value:"shortAnswer",children:"Short Answer"}),Object(n.jsx)("option",{value:"multipleChoice",children:"Multiple Choice"}),Object(n.jsx)("option",{value:"fileUpload",children:"File Upload"})]})]}),Object(n.jsx)("p",{}),Object(n.jsx)(e,{setAnswer:this.setAnswer,setAcceptableAnswerTypes:this.setAcceptableAnswerTypes}),Object(n.jsx)("p",{}),Object(n.jsxs)("button",{id:"createQuestion-createQuestionBtn",type:"submit",style:{width:"70%",fontSize:"36px"},className:"btn btn-primary btn-color-theme",children:[Object(n.jsx)("span",{className:this.state.submitIcon}),"\xa0 ",this.state.submitLabel]})]})})}}]),s}(a.a.Component),k={};k.multipleChoice=M,k.shortAnswer=T,k.fileUpload=A;var _=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var r;Object(d.a)(this,s),(r=t.call(this,e)).handleChange=function(e){var t=e.target.name;r.setState(Object(y.a)({},t,e.target.value),r.checkDataValidity)},r.handleSubmit=function(e){if(e.preventDefault(),0==r.state.dropdownOfCourses.length);else{var t={surveyTitle:r.state.surveyTitle,surveyDate:r.state.date,courseID:r.state.courseID};setTimeout(r.props.saveSurvey,1e3,"efr423f",t),r.props.changeMode(m.SURVEY_MANAGEMENT_SEARCH_SURVEYS)}},r.getCourses=function(){for(var e=[],t=0;t<r.props.userObj.courses.length;t++){var s=r.props.userObj.courses[t].courseSemester+"-"+r.props.userObj.courses[t].courseYear+": "+r.props.userObj.courses[t].courseName+"  "+r.props.userObj.courses[t].courseNumber;e.push(Object(n.jsx)("option",{id:r.props.userObj.courses[t].courseID,value:r.props.userObj.courses[t].courseID,children:s}))}return e},r.handleDropdownChange=function(e){var t,s=e.target.name;r.setState((t={},Object(y.a)(t,s,e.target.value),Object(y.a)(t,"courseID",e.target.value),t),r.checkDataValidity)},r.checkDataValidity=function(){0==r.state.surveyTitle.length?r.surveyTitleRef.current.setCustomValidity("Survey title missing."):r.surveyTitleRef.current.setCustomValidity(""),""==r.state.dropdownOfCourses?r.courseSelectionRef.current.setCustomValidity("Course is missing for the survey."):r.courseSelectionRef.current.setCustomValidity("");var e=new Date(Date.now()-6e4*(new Date).getTimezoneOffset());r.state.date<e.toISOString().substr(0,10)?r.surveyDateRef.current.setCustomValidity("Cannot create a survey for day in the past."):r.surveyDateRef.current.setCustomValidity("")},r.courseSelectionRef=a.a.createRef(),r.surveyTitleRef=a.a.createRef(),r.surveyDateRef=a.a.createRef();var o=new Date(Date.now()-6e4*(new Date).getTimezoneOffset());return r.state={answerType:"shortAnswer",question:"",addSurvey:!1,surveyTitle:"",date:o.toISOString().substr(0,10),dropdownOfCourses:r.props.userObj.courses.length>0?r.props.userObj.courses[0].courseSemester+"-"+r.props.userObj.courses[0].courseYear+": "+r.props.userObj.courses[0].courseName+"  "+r.props.userObj.courses[0].courseNumber:"",courseID:r.props.userObj.courses.length>0?r.props.userObj.courses[0].courseID:""},r}return Object(p.a)(s,[{key:"render",value:function(){return Object(n.jsx)("form",{className:"padded-page",id:"createSurvey-page",onSubmit:this.handleSubmit,children:Object(n.jsxs)("center",{children:[Object(n.jsxs)("label",{children:["Survey Title:",Object(n.jsx)("input",{name:"surveyTitle",id:"createSurvey-title",className:"form-control form-center",value:this.state.surveyTitle,onChange:this.handleChange,minLength:1,ref:this.surveyTitleRef,type:"text"})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Date:",Object(n.jsx)("input",{name:"date",id:"createSurvey-date",className:"form-control form-center",type:"date",value:this.state.date,onChange:this.handleChange,ref:this.surveyDateRef})]}),Object(n.jsx)("p",{}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Course:",Object(n.jsx)("select",{name:"dropdownOfCourses",value:this.state.dropdownOfCourses,onChange:this.handleDropdownChange,onBlur:this.handleDropdownChange,id:this.state.courseID,defaultValue:this.state.dropdownOfCourses,required:!0,ref:this.courseSelectionRef,className:"form-control form-center",children:this.getCourses()})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("button",{type:"submit",id:"createSurvey-creatBtn",style:{width:"50%",fontSize:"36px"},className:"btn btn-primary btn-color-theme",children:[Object(n.jsx)("span",{className:"fa fa-plus"}),"\xa0 Create survey"]})]})})}}]),s}(a.a.Component),L=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){return Object(d.a)(this,s),t.call(this,e)}return Object(p.a)(s,[{key:"render",value:function(){return Object(n.jsx)("form",{id:"activeQuestionPage",className:"padded-page",children:Object(n.jsx)("center",{children:Object(n.jsxs)("div",{class:"wrapper",children:[Object(n.jsxs)("div",{className:"card survey-card",children:[Object(n.jsxs)("button",{type:"submit",style:{width:"100%",fontSize:"17px"},className:"btn btn-primary btn-color-theme",children:[Object(n.jsx)("span",{className:"fa fa-pencil"}),"\xa0 Edit"]}),Object(n.jsx)("div",{className:"card-header",children:"Question 1"}),Object(n.jsxs)("div",{className:"card-body",children:["Question Type  ",Object(n.jsx)("br",{}),"  Content:"]}),Object(n.jsx)("div",{className:"card-footer",children:"Course Number  Section"})]}),Object(n.jsxs)("div",{className:"card survey-card",children:[Object(n.jsxs)("button",{type:"submit",style:{width:"100%",fontSize:"17px"},className:"btn btn-primary btn-color-theme",children:[Object(n.jsx)("span",{className:"fa fa-pencil"}),"\xa0 Edit"]}),Object(n.jsx)("div",{className:"card-header",children:"Question 2"}),Object(n.jsxs)("div",{className:"card-body",children:["Question Type  ",Object(n.jsx)("br",{}),"  Content:"]}),Object(n.jsx)("div",{className:"card-footer",children:"Course Number  Section"})]}),Object(n.jsxs)("div",{className:"card survey-card",children:[Object(n.jsxs)("button",{type:"submit",style:{width:"100%",fontSize:"17px"},className:"btn btn-primary btn-color-theme",children:[Object(n.jsx)("span",{className:"fa fa-pencil"}),"\xa0 Edit"]}),Object(n.jsx)("div",{className:"card-header",children:"Question 3"}),Object(n.jsxs)("div",{className:"card-body",children:["Question Type  ",Object(n.jsx)("br",{}),"  Content:"]}),Object(n.jsx)("div",{className:"card-footer",children:"Course Number  Section"})]}),Object(n.jsxs)("div",{className:"card survey-card",children:[Object(n.jsxs)("button",{type:"submit",style:{width:"100%",fontSize:"17px"},className:"btn btn-primary btn-color-theme",children:[Object(n.jsx)("span",{className:"fa fa-pencil"}),"\xa0 Edit"]}),Object(n.jsx)("div",{className:"card-header",children:"Question 4"}),Object(n.jsxs)("div",{className:"card-body",children:["Question Type  ",Object(n.jsx)("br",{}),"  Content:"]}),Object(n.jsx)("div",{className:"card-footer",children:"Course Number  Section"})]}),Object(n.jsxs)("div",{className:"card survey-card",children:[Object(n.jsxs)("button",{type:"submit",style:{width:"100%",fontSize:"17px"},className:"btn btn-primary btn-color-theme",children:[Object(n.jsx)("span",{className:"fa fa-pencil"}),"\xa0 Edit"]}),Object(n.jsx)("div",{className:"card-header",children:"Question 5"}),Object(n.jsxs)("div",{className:"card-body",children:["Question Type  ",Object(n.jsx)("br",{}),"  Content:"]}),Object(n.jsx)("div",{className:"card-footer",children:"Course Number  Section"})]}),Object(n.jsxs)("div",{className:"card survey-card",children:[Object(n.jsxs)("button",{type:"submit",style:{width:"100%",fontSize:"17px"},className:"btn btn-primary btn-color-theme",children:[Object(n.jsx)("span",{className:"fa fa-pencil"}),"\xa0 Edit"]}),Object(n.jsx)("div",{className:"card-header",children:"Question 6"}),Object(n.jsxs)("div",{className:"card-body",children:["Question Type  ",Object(n.jsx)("br",{}),"  Content:"]}),Object(n.jsx)("div",{className:"card-footer",children:"Course Number  Section"})]}),Object(n.jsxs)("div",{className:"card survey-card",children:[Object(n.jsxs)("button",{type:"submit",style:{width:"100%",fontSize:"17px"},className:"btn btn-primary btn-color-theme",children:[Object(n.jsx)("span",{className:"fa fa-pencil"}),"\xa0 Edit"]}),Object(n.jsx)("div",{className:"card-header",children:"Question 7"}),Object(n.jsxs)("div",{className:"card-body",children:["Question Type  ",Object(n.jsx)("br",{}),"  Content:"]}),Object(n.jsx)("div",{className:"card-footer",children:"Course Number  Section"})]})]})})})}}]),s}(a.a.Component),q=(s(12),function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).deleteResponse=function(e){e.preventDefault(),n.props.deleteResponse({responseId:n.props.responseItem.response.responseId,questionID:n.props.responseItem.question.questionID,courseID:n.props.responseItem.survey.courseID,surveyID:n.props.responseItem.survey.surveyID}),n.props.closeDeleteResponseModal()},n.closeModal=function(e){e.preventDefault(),n.props.closeDeleteResponseModal()},n.state={},n}return Object(p.a)(s,[{key:"render",value:function(){return Object(n.jsx)("div",{id:"deleteResponseModal",className:"modal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true",children:Object(n.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(n.jsxs)("div",{className:"modal-content",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("h5",{className:"modal-title",id:"exampleModalLongTitle",children:"Delete Response"}),Object(n.jsx)("button",{type:"button",className:"close",id:"deleteResponseModal-closeBtn",onClick:this.closeModal,"data-dismiss":"modal","aria-label":"Close",children:Object(n.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(n.jsx)("div",{className:"modal-body",children:"Are you sure you want to delete this response?"}),Object(n.jsxs)("div",{className:"modal-footer",children:[Object(n.jsx)("button",{type:"button",className:"btn btn-primary",id:"deleteResponseModal-cancelBtn",onClick:this.closeModal,"data-dismiss":"modal",children:"Close"}),Object(n.jsx)("button",{type:"button",onClick:this.deleteResponse,id:"deleteResponseModal-deleteBtn",className:"btn btn-danger",children:"Delete"})]})]})})})}}]),s}(a.a.Component)),V=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var r;return Object(d.a)(this,s),(r=t.call(this,e)).handleAnswers=function(){if(1==r.props.responseItem.question.questionAnswers.length)return"FileUpload"==r.props.responseItem.question.questionType||"F"==r.props.responseItem.question.questionType?Object(n.jsx)("iframe",{id:"viewResponse-answer-file",src:r.props.responseItem.question.questionAnswers[0],children:" "}):Object(n.jsx)("div",{id:"viewResponse-answer-freeResponse",children:r.props.responseItem.question.questionAnswers[0]});var e=r.props.responseItem.question.questionAnswers,t=[];return e.forEach((function(e){t.push(Object(n.jsx)("div",{children:e}))})),Object(n.jsx)("div",{id:"viewResponse-answer-multipleChoice",children:t})},r.state={questions:[],allResponses:[],showConfirmDelete:!1},r}return Object(p.a)(s,[{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{id:"viewResponseModal",className:"modal",itemID:"exampleModalLong",tabIndex:-1,role:"dialog","aria-labelledby":"exampleModalLongTitle","aria-hidden":"true",children:Object(n.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(n.jsxs)("div",{className:"modal-content",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("h5",{className:"modal-title",id:"exampleModalLongTitle",children:this.props.responseItem.survey.surveyTitle}),Object(n.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",id:"viewResponseModal-exitBtn",onClick:function(){e.props.closeResponse()},"aria-label":"Close",children:Object(n.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(n.jsxs)("div",{className:"modal-body",children:[Object(n.jsxs)("div",{class:"form-group",children:[Object(n.jsx)("label",{for:"recipient-name",style:{fontSize:"22pt"},class:"col-form-label",children:"Question:"}),Object(n.jsx)("div",{class:"form-control",id:"viewResponse-question",children:this.props.responseItem.question.questionText})]}),Object(n.jsxs)("div",{class:"form-group",children:[Object(n.jsx)("label",{for:"recipient-name",style:{fontSize:"22pt"},class:"col-form-label",children:"Response:"}),Object(n.jsx)("div",{class:"form-control",id:"viewResponse-response",children:this.props.responseItem.response.surveyResponse})]})]}),Object(n.jsx)("div",{className:"modal-body",children:Object(n.jsxs)("div",{class:"form-group",children:[Object(n.jsx)("label",{for:"recipient-name",style:{fontSize:"22pt"},class:"col-form-label",children:"Answer(s):"}),Object(n.jsx)("div",{class:"form-control",id:"viewResponse-answer",children:this.handleAnswers()})]})}),Object(n.jsx)("div",{className:"modal-footer",children:Object(n.jsx)("button",{id:"viewResponseModal-closeBtn",type:"button",className:"btn btn-secondary",onClick:function(){e.props.closeResponse()},"data-dismiss":"modal",children:"Close"})})]})})})}}]),s}(a.a.Component),Q=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var r;return Object(d.a)(this,s),(r=t.call(this,e)).renderResponseTable=function(e){var t=[];console.log("renderResponseTable"),console.log(e);var s=0;return e.forEach((function(e){console.log("index"),t.push(Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e.responseType}),Object(n.jsx)("td",{children:e.question.questionText}),Object(n.jsx)("td",{children:e.response.responseDateTime}),Object(n.jsx)("td",{children:e.response.surveyResponse}),Object(n.jsx)("td",{children:Object(n.jsx)("button",{id:e.surveyID+"-"+e.question.questionID+"-"+e.response.responseId+"-"+s+"-view",onClick:r.props.menuOpen?null:function(){return r.viewResponse(e.surveyID+"-"+e.question.questionID+"-"+e.response.responseId+"-"+s)},children:Object(n.jsx)("span",{className:"fa fa-eye"})})}),Object(n.jsx)("td",{children:Object(n.jsx)("button",{id:e.surveyID+"-"+e.question.questionID+"-"+e.response.responseId+"-"+s+"-delete",onClick:r.props.menuOpen?null:function(){return r.confirmDeleteResponse(e.surveyID+"-"+e.question.questionID+"-"+e.response.responseId+"-"+s)},children:Object(n.jsx)("span",{className:"fa fa-trash"})})})]},e.surveyID+"-"+e.question.questionID+"-"+e.responseId+"-"+s)),s++})),t},r.viewResponse=function(e){console.log("viewResponse: rowId"),console.log(e);var t=r.parseResponseRowId(e),s=r.state.responses.find((function(e){return e.surveyID==t[0]&&e.questionID==t[1]&&e.response.responseId==t[2]}));console.log("viewResponse: responseObject"),console.log(s),r.setState({showResponseModal:!0,editRowId:e,responseItem:s}),console.log("Viewing a response")},r.parseResponseRowId=function(e){return e.split("-")},r.confirmDeleteResponse=function(e){console.log("confirmDeleteResponse: rowId"),console.log(e);var t=r.parseResponseRowId(e),s=r.state.responses.find((function(e){return e.surveyID==t[0]&&e.questionID==t[1]&&e.response.responseId==t[2]}));console.log("confirmDeleteResponse: responseObject"),console.log(s),r.setState({showDeleteResponseModal:!0,editRowId:e,responseItem:s}),console.log("Deleting a response")},r.deleteResponse=function(e){r.removeResponse(e)},r.removeResponse=function(){var e=Object(u.a)(l.a.mark((function e(t){var s,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/responses/",e.next=3,fetch("/responses/",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"DELETE",body:JSON.stringify(t)});case 3:return s=e.sent,e.next=6,s.text();case 6:if(n=e.sent,200!=s.status){e.next=12;break}return r.props.getQuestions(),e.abrupt("return",1);case 12:return console.log(s),console.log(n),console.log("deleteResponse: ERROR"),e.abrupt("return",0);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.searchResponseTable=function(e){13===e.keyCode&&(e.preventDefault(),r.state.searchKey.length>0?r.onSearch(r.state.searchKey):r.setState({responses:r.props.responses}))},r.onSearch=function(e){var t=r.props.responses,s=[];t.forEach((function(t){var n="";n+=t.responseType,n+=t.question.questionText+" ",n+=t.response.responseDateTime+" ",(n+=t.response.surveyResponse+" ").toUpperCase().indexOf(e.toUpperCase())>-1&&s.push(t)})),r.setState({responses:s})},r.sortTable=function(e){return r.state.responses.sort(e)},r.onSearchKeyChange=function(e){r.setState({searchKey:e.target.value})},r.sortByDate=function(e){e.preventDefault();var t=r.sortTable((function(e,t){if(null==e||null==t){if(null==e)return r.state.sortDateInOrder?-1:1;if(null==t)return r.state.sortDateInOrder?1:-1}return e.response.responseDateTime<t.response.responseDateTime?r.state.sortDateInOrder?-1:1:e.response.responseDateTime>t.response.responseDateTime?r.state.sortDateInOrder?1:-1:0}));r.setState({responses:t,sortDateInOrder:!r.state.sortDateInOrder})},r.sortByQuestion=function(e){e.preventDefault();var t=r.sortTable((function(e,t){if(null==e||null==t){if(null==e)return r.state.sortQuestionInOrder?-1:1;if(null==t)return r.state.sortQuestionInOrder?1:-1}return e.question.questionText<t.question.questionText?r.state.sortQuestionInOrder?-1:1:e.question.questionText>t.question.questionText?r.state.sortQuestionInOrder?1:-1:0}));r.setState({responses:t,sortQuestionInOrder:!r.state.sortQuestionInOrder})},r.sortByResponseType=function(e){e.preventDefault();var t=r.sortTable((function(e,t){if(null==e||null==t){if(null==e)return r.state.sortResponseTypeInOrder?-1:1;if(null==t)return r.state.sortResponseTypeInOrder?1:-1}return e.responseType<t.responseType?r.state.sortResponseTypeInOrder?-1:1:e.responseType>t.responseType?r.state.sortResponseTypeInOrder?1:-1:0}));r.setState({responses:t,sortResponseTypeInOrder:!r.state.sortResponseTypeInOrder})},r.sortByResponse=function(e){e.preventDefault();var t=r.sortTable((function(e,t){if(null==e||null==t){if(null==e)return r.state.sortResponseInOrder?-1:1;if(null==t)return r.state.sortResponseInOrder?1:-1}return e.response.surveyResponse<t.response.surveyResponse?r.state.sortResponseInOrder?-1:1:e.response.surveyResponse>t.response.surveyResponse?r.state.sortResponseInOrder?1:-1:0}));r.setState({responses:t,sortResponseInOrder:!r.state.sortResponseInOrder})},r.state={questions:r.props.questions,responses:r.props.responses,showResponseModal:!1,showConfirmDelete:!1,editRowId:"",responseItem:{},searchKey:"",showDeleteResponseModal:!1,sortResponseInOrder:!1,sortDateInOrder:!1,sortQuestionInOrder:!1,sortResponseTypeInOrder:!1},r}return Object(p.a)(s,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{id:"responseTableMode",className:"padded-page",children:[Object(n.jsx)("h1",{}),Object(n.jsxs)("div",{className:"input-group center-search",style:{justifyContent:"center",paddingBottom:"20px"},children:[Object(n.jsx)("span",{className:"input-group-prepend",children:Object(n.jsx)("div",{className:"input-group-text bg-transparent border-right-0",children:Object(n.jsx)("i",{className:"fa fa-search"})})}),Object(n.jsx)("input",{className:"form-control py-2 border-left-0 border",placeholder:"Search responses",type:"search",value:this.state.searchKey,id:"searchResponses",onKeyUp:this.searchResponseTable,onChange:this.onSearchKeyChange})]}),Object(n.jsxs)("table",{className:"table table-hover",children:[Object(n.jsx)("thead",{className:"thead-light",children:Object(n.jsxs)("tr",{children:[Object(n.jsxs)("th",{children:[Object(n.jsx)("span",{id:"responseSortQuestionType",style:{cursor:"pointer"},className:"fa fa-sort",onClick:this.sortByResponseType}),"\xa0Response type "]}),Object(n.jsxs)("th",{children:[Object(n.jsx)("span",{id:"responseSortQuestion",style:{cursor:"pointer"},className:"fa fa-sort",onClick:this.sortByQuestion}),"\xa0Question"]}),Object(n.jsxs)("th",{children:[Object(n.jsx)("span",{id:"responseSortDate",style:{cursor:"pointer"},className:"fa fa-sort",onClick:this.sortByDate}),"\xa0Response Date-Time"]}),Object(n.jsxs)("th",{children:[Object(n.jsx)("span",{id:"responseSortResponse",style:{cursor:"pointer"},className:"fa fa-sort",onClick:this.sortByResponse}),"\xa0Response"]}),Object(n.jsx)("th",{children:"View"}),Object(n.jsx)("th",{children:"Delete"})]})}),Object(n.jsx)("tbody",{id:"responseTableBody",children:0===Object.keys(this.props.responses).length?Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"5",style:{fontStyle:"italic"},children:"No responses made"})}):this.renderResponseTable(this.state.responses)})]}),this.state.showResponseModal?Object(n.jsx)(V,{closeResponse:function(){e.props.getQuestions(),e.setState({showResponseModal:!1})},responseItem:this.state.responseItem}):null,this.state.showDeleteResponseModal?Object(n.jsx)(q,{closeDeleteResponseModal:function(){e.props.getQuestions(),e.setState({showDeleteResponseModal:!1})},responseItem:this.state.responseItem,deleteResponse:this.deleteResponse}):null]})}}]),s}(a.a.Component),P=s(14),G=s.n(P),Y=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).onSearchClicked=function(){console.log("onSearchClicked")},n}return Object(p.a)(s,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"padded-page",id:"searchQuestionsMode",children:Object(n.jsxs)("center",{children:[Object(n.jsx)("h1",{}),Object(n.jsx)("div",{className:"input-group center-search",style:{justifyContent:"center",paddingBottom:"20px"},children:Object(n.jsx)(G.a,{classNames:"search-width",placeholder:"Search question",onSearchClick:this.onSearchClicked})}),Object(n.jsxs)("table",{className:"table table-hover",children:[Object(n.jsx)("thead",{className:"thead-light",children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Question Title"}),Object(n.jsx)("th",{children:"Question"}),Object(n.jsx)("th",{children:"Answer Type"}),Object(n.jsx)("th",{children:"View/Edit..."}),Object(n.jsx)("th",{children:"Delete"})]})}),Object(n.jsx)("tbody",{})]})]})})}}]),s}(a.a.Component),B=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var r;return Object(d.a)(this,s),(r=t.call(this,e)).renderTable=function(e){for(var t=[],s=function(s){t.push(Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e[s].surveyID}),Object(n.jsx)("td",{children:e[s].surveyTitle}),Object(n.jsx)("td",{children:e[s].surveyDate}),Object(n.jsx)("td",{children:e[s].courseID}),Object(n.jsx)("td",{id:e[s].surveyID+"-questionsLength",children:e[s].questions.length}),Object(n.jsx)("td",{children:Object(n.jsx)("button",{id:e[s].surveyID+"-"+s+"-delete",onClick:r.props.menuOpen?null:function(){return r.confirmDeleteResponse(e[s].surveyID+"-"+s)},children:Object(n.jsx)("span",{className:"fa fa-trash"})})})]},e[s].surveyID+"-"+s))},a=0;a<e.length;a++)s(a);return t},r.sortByCourseID=function(){console.log("sortByCourseID")},r.sortByDate=function(){console.log("sortByDate")},r.sortBySurveyID=function(){console.log("sortBySurveyID")},r.sortByNumberOfQuestions=function(){console.log("sortByNumberOfQuestions")},r.sortBySurveyTitle=function(){console.log("sortBySurveyTitle")},r.state={surveys:r.props.surveys},r}return Object(p.a)(s,[{key:"render",value:function(){return Object(n.jsxs)("div",{id:"searchSurveyTableMode",className:"padded-page",children:[Object(n.jsx)("h1",{}),Object(n.jsxs)("div",{className:"input-group center-search",style:{justifyContent:"center",paddingBottom:"20px"},children:[Object(n.jsx)("span",{className:"input-group-prepend",children:Object(n.jsx)("div",{className:"input-group-text bg-transparent border-right-0",children:Object(n.jsx)("i",{className:"fa fa-search"})})}),Object(n.jsx)("input",{className:"form-control py-2 border-left-0 border",placeholder:"Search responses",type:"search",id:"searchSurveys"})]}),Object(n.jsxs)("table",{className:"table table-hover",children:[Object(n.jsx)("thead",{className:"thead-light",children:Object(n.jsxs)("tr",{children:[Object(n.jsxs)("th",{children:[Object(n.jsx)("span",{id:"surveySearch-SurveyID",style:{cursor:"pointer"},className:"fa fa-sort",onClick:this.sortBySurveyID}),"\xa0Survey ID "]}),Object(n.jsxs)("th",{children:[Object(n.jsx)("span",{id:"surveySearch-SurveyTitle",style:{cursor:"pointer"},className:"fa fa-sort",onClick:this.sortBySurveyTitle}),"\xa0Survey Title"]}),Object(n.jsxs)("th",{children:[Object(n.jsx)("span",{id:"surveySearch-Date",style:{cursor:"pointer"},className:"fa fa-sort",onClick:this.sortByDate}),"\xa0Survey Creation Date"]}),Object(n.jsxs)("th",{children:[Object(n.jsx)("span",{id:"surveySearch-CourseID",style:{cursor:"pointer"},className:"fa fa-sort",onClick:this.sortByCourseID}),"\xa0Course ID"]}),Object(n.jsxs)("th",{children:[Object(n.jsx)("span",{id:"surveySearch-NumberOfQuestions",style:{cursor:"pointer"},className:"fa fa-sort",onClick:this.sortByNumberOfQuestions}),"\xa0Number of Questions"]}),Object(n.jsx)("th",{children:"Delete"})]})}),Object(n.jsx)("tbody",{id:"searchSurveyTableBody",children:0===Object.keys(this.props.surveys).length?Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"5",style:{fontStyle:"italic"},children:"No surveys created"})}):this.renderTable(this.state.surveys)})]})]})}}]),s}(a.a.Component),z=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).setDeleteId=function(e){n.setState({deleteId:e})},n.setEditId=function(e){n.setState({editId:e})},n.saveQuestion=function(){var e=Object(u.a)(l.a.mark((function e(t,s){var r,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/questions/"+t,e.next=3,fetch(r,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(s)});case 3:return a=e.sent,e.next=6,a.text();case 6:if(o=e.sent,200==a.status){e.next=14;break}return n.setState({errorMsg:o}),e.next=11,n.getQuestions();case 11:n.props.changeMode(m.SURVEY_MANAGEMENT_SEARCH),e.next=18;break;case 14:return n.setState({errorMsg:""}),e.next=17,n.getQuestions();case 17:n.props.refreshOnUpdate(m.SURVEY_MANAGEMENT_SEARCH);case 18:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),n.editQuestion=function(){var e=Object(u.a)(l.a.mark((function e(t,s){var r,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/questions/"+t+"/"+n.props.userObj.questions[n.state.editId]._id,e.next=3,fetch(r,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify(s)});case 3:return a=e.sent,e.next=6,a.text();case 6:o=e.sent,200!=a.status?(alert("An error occurred when attempting to update the question to database: "+o),n.props.changeMode(m.SURVEY_MANAGEMENT_SEARCH)):(console.log("Question Updated!"),n.props.refreshOnUpdate(m.SURVEY_MANAGEMENT_SEARCH));case 8:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),n.deleteQuestion=Object(u.a)(l.a.mark((function e(){var t,s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/questions/"+n.props.userObj.id+"/"+n.props.userObj.entries[n.state.deleteId]._id,e.next=3,fetch(t,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"DELETE"});case 3:return s=e.sent,e.next=6,s.text();case 6:r=e.sent,200!=s.status?(alert("An error occurred when attempting to delete question in database: "+r),n.props.changeMode(m.SURVEY_MANAGEMENT_SEARCH)):n.props.refreshOnUpdate(m.SURVEY_MANAGEMENT_SEARCH);case 8:case"end":return e.stop()}}),e)}))),n.saveSurvey=function(){var e=Object(u.a)(l.a.mark((function e(t,s){var r,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/surveys/"+t,e.next=3,fetch(r,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(s)});case 3:return a=e.sent,e.next=6,a.text();case 6:if(o=e.sent,200==a.status){e.next=14;break}return n.setState({errorMsg:o}),e.next=11,n.getQuestions();case 11:n.props.changeMode(m.SURVEY_MANAGEMENT_SEARCH_SURVEYS),e.next=18;break;case 14:return n.setState({errorMsg:""}),e.next=17,n.getQuestions();case 17:n.props.refreshOnUpdate(m.SURVEY_MANAGEMENT_SEARCH_SURVEYS);case 18:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),n.getQuestions=Object(u.a)(l.a.mark((function e(){var t,s,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],0==(t=n.props.userObj.courses.map((function(e){return e.courseID}))).length&&(t=[""]),e.next=5,fetch("/responses/"+n.props.userObj.id+"/"+JSON.stringify(t));case 5:if(200!=(s=e.sent).status){e.next=14;break}return e.next=9,s.json();case 9:s=e.sent,r=JSON.parse(s),a=function(e){if(0==e.length)return[];var t=[],s=[];return e.forEach((function(e){e.questions.forEach((function(n){s.push({questionID:n.questionID,surveyID:e.surveyID,responses:n.responses,survey:e,question:n}),n.responses.forEach((function(s){t.push({questionID:n.questionID,surveyID:e.surveyID,response:s,survey:e,question:n,responseType:s.students.length>1?"Group":"Individual"})}))}))})),[t,s]}(r),n.setState({surveys:r,questions:a[1],responses:a[0]});case 14:case"end":return e.stop()}}),e)}))),n.state={questions:[],responses:[],surveys:[],errorMsg:"",deleteId:"",editId:""},n.getQuestions(),n}return Object(p.a)(s,[{key:"render",value:function(){switch(this.props.mode){case m.SURVEY_MANAGEMENT:return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(L,{})});case m.SURVEY_MANAGEMENT_CREATE:return Object(n.jsx)(U,{userObj:this.props.userObj,surveys:this.state.surveys,mode:this.props.mode,changeMode:this.props.changeMode,saveQuestion:this.saveQuestion});case m.SURVEY_MANAGEMENT_EDIT:var e=Object(D.a)({},this.props.userObj.questions[this.state.editId]);return e.date=e.date.substr(0,10),Object(n.jsx)(U,{startData:e,surveys:this.state.surveys,mode:this.props.mode,changeMode:this.props.changeMode,saveQuestion:this.saveQuestion,editQuestion:this.editQuestion});case m.SURVEY_MANAGEMENT_CREATE_SURVEY:return Object(n.jsx)(_,{userObj:this.props.userObj,surveys:this.state.surveys,changeMode:this.props.changeMode,saveSurvey:this.saveSurvey});case m.SURVEY_MANAGEMENT_SEARCH:return Object(n.jsx)(Y,{setEditId:this.setEditId,setDeleteId:this.setDeleteId,deleteQuestion:this.deleteQuestion});case m.SURVEY_MANAGEMENT_SEARCH_SURVEYS:return Object(n.jsx)(B,{surveys:this.state.surveys,getQuestions:this.getQuestions,menuOpen:this.props.menuOpen});case m.SURVEY_MANAGEMENT_RESPONSES:return Object(n.jsx)(Q,{userObj:this.props.userObj,getQuestions:this.getQuestions,questions:this.state.questions,responses:this.state.responses,menuOpen:this.props.menuOpen})}}}]),s}(a.a.Component),F=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){return Object(d.a)(this,s),t.apply(this,arguments)}return Object(p.a)(s,[{key:"render",value:function(){return Object(n.jsx)("div",{id:"aboutModal",className:"modal",role:"dialog",children:Object(n.jsxs)("div",{className:"modal-content",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("center",{children:Object(n.jsx)("h3",{className:"modal-title",children:Object(n.jsx)("b",{children:"Confirm Round Deletion"})})}),Object(n.jsx)("button",{id:"modalClose",className:"modal-close",onClick:this.props.close,children:"\xd7"})]}),Object(n.jsx)("div",{className:"modal-body",children:Object(n.jsx)("p",{children:"Do you really want to delete this round?"})}),Object(n.jsxs)("div",{className:"modal-footer",children:[Object(n.jsx)("button",{className:"btn btn-danger",onClick:this.props.deleteRound,children:"Yes, Delete"}),Object(n.jsx)("button",{className:"btn btn-secondary",onClick:this.props.close,children:"No, Cancel"})]})]})})}}]),s}(a.a.Component),H=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){var e;return Object(d.a)(this,s),(e=t.call(this)).editRound=function(t){e.props.setEditId(t),e.props.changeMode(m.ROUNDS_EDITROUND)},e.deleteRound=function(){e.props.deleteRound(),e.setState({showConfirmDelete:!1})},e.confirmDelete=function(t){e.props.setDeleteId(t),e.setState({showConfirmDelete:!0})},e.renderTable=function(){for(var t=[],s=function(s){t.push(Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e.props.rounds[s].date.substring(0,10)}),Object(n.jsx)("td",{children:e.props.rounds[s].course}),Object(n.jsx)("td",{children:Number(e.props.rounds[s].strokes)+Number(e.props.rounds[s].minutes)+":"+(e.props.rounds[s].seconds<10?"0"+e.props.rounds[s].seconds:e.props.rounds[s].seconds)+" ("+e.props.rounds[s].strokes+" in "+e.props.rounds[s].minutes+":"+(e.props.rounds[s].seconds<10?"0"+e.props.rounds[s].seconds:e.props.rounds[s].seconds)+")"}),Object(n.jsx)("td",{children:Object(n.jsx)("button",{onClick:e.props.menuOpen?null:function(){return e.editRound(s)},children:Object(n.jsx)("span",{className:"fa fa-eye"})})}),Object(n.jsx)("td",{children:Object(n.jsx)("button",{onClick:e.props.menuOpen?null:function(){return e.confirmDelete(s)},children:Object(n.jsx)("span",{className:"fa fa-trash"})})})]},s))},r=0;r<e.props.rounds.length;++r)s(r);return t},e.state={showConfirmDelete:!1},e}return Object(p.a)(s,[{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:"padded-page",children:[Object(n.jsx)("h1",{}),Object(n.jsxs)("table",{className:"table table-hover",children:[Object(n.jsx)("thead",{className:"thead-light",children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Date"}),Object(n.jsx)("th",{children:"Course"}),Object(n.jsx)("th",{children:"Score"}),Object(n.jsx)("th",{children:"View/Edit..."}),Object(n.jsx)("th",{children:"Delete"})]})}),Object(n.jsx)("tbody",{children:0===Object.keys(this.props.rounds).length?Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"5",style:{fontStyle:"italic"},children:"No rounds logged"})}):this.renderTable()})]}),this.state.showConfirmDelete?Object(n.jsx)(F,{close:function(){return e.setState({showConfirmDelete:!1})},deleteRound:this.deleteRound}):null]})}}]),s}(a.a.Component),J=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var n;Object(d.a)(this,s),(n=t.call(this,e)).handleChange=function(e){var t=e.target.name;if("seconds"===t){var s=e.target.value.length<2?"0"+e.target.value:e.target.value,r=n.computeSGS(n.state.strokes,n.state.minutes,s);n.setState({seconds:s,SGS:r})}else if("strokes"===t){var a=e.target.value,o=n.computeSGS(a,n.state.minutes,n.state.seconds);n.setState({strokes:a,SGS:o})}else if("minutes"===t){var c=e.target.value,i=n.computeSGS(n.state.strokes,c,n.state.seconds);n.setState({minutes:c,SGS:i})}else n.setState(Object(y.a)({},t,e.target.value))},n.handleSubmit=function(e){n.setState({faIcon:"fa fa-spin fa-spinner",btnLabel:n.props.mode===m.ROUNDS_LOGROUND?"Saving...":"Updating..."});var t=n.state;delete t.faIcon,delete t.btnLabel,setTimeout(n.props.saveRound,1e3,t),e.preventDefault()},n.computeSGS=function(e,t,s){return Number(e)+Number(t)+":"+s};var r=new Date(Date.now()-6e4*(new Date).getTimezoneOffset());if(n.props.mode===m.ROUNDS_LOGROUND)n.state={date:r.toISOString().substr(0,10),course:"",type:"practice",holes:"18",strokes:80,minutes:50,seconds:"00",notes:"",faIcon:"fa fa-save",btnLabel:"Save Round Data"};else{var a=Object(D.a)({},n.props.startData);delete a.id,a.faIcon="fa fa-edit",a.btnLabel="Update Round Data",n.state=a}return n}return Object(p.a)(s,[{key:"render",value:function(){return Object(n.jsx)("form",{className:"padded-page",onSubmit:this.handleSubmit,children:Object(n.jsxs)("center",{children:[Object(n.jsxs)("label",{children:["Date:",Object(n.jsx)("input",{name:"date",className:"form-control form-center",type:"date",value:this.state.date,onChange:this.handleChange})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Course:",Object(n.jsx)("input",{name:"course",className:"form-control form-center",type:"text",value:this.state.course,onChange:this.handleChange,placeholder:"Course played",size:"50",maxLength:"50"})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Type:",Object(n.jsxs)("select",{name:"type",value:this.state.type,className:"form-control form-center",onChange:this.handleChange,children:[Object(n.jsx)("option",{value:"practice",children:"Practice"}),Object(n.jsx)("option",{value:"tournament",children:"Tournament"})]})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["# Holes:",Object(n.jsxs)("select",{name:"holes",value:this.state.holes,className:"form-control form-center",onChange:this.handleChange,children:[Object(n.jsx)("option",{value:"9",children:"9"}),Object(n.jsx)("option",{value:"18",children:"18"})]})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["# Strokes:",Object(n.jsx)("input",{name:"strokes",className:"form-control form-center",type:"number",min:"9",max:"200",value:this.state.strokes,onChange:this.handleChange})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Time: ",Object(n.jsx)("br",{}),Object(n.jsx)("input",{name:"minutes",type:"number",size:"3",min:"10",max:"400",value:this.state.minutes,onChange:this.handleChange}),":",Object(n.jsx)("input",{name:"seconds",type:"number",size:"2",min:"0",max:"60",value:this.state.seconds,onChange:this.handleChange})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Speedgolf Score: ",Object(n.jsx)("br",{}),Object(n.jsx)("input",{name:"SGS",className:"form-center",type:"text",size:"6",disabled:!0,value:this.computeSGS(this.state.strokes,this.state.minutes,this.state.seconds)})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Notes:",Object(n.jsx)("textarea",{name:"notes",className:"form-control",rows:"6",cols:"75",placeholder:"Enter round notes",value:this.state.notes,onChange:this.handleChange})]}),Object(n.jsx)("p",{}),Object(n.jsx)("p",{}),Object(n.jsxs)("button",{type:"submit",style:{width:"70%",fontSize:"36px"},className:"btn btn-primary btn-color-theme",children:[Object(n.jsx)("span",{className:this.state.faIcon}),"\xa0",this.state.btnLabel]})]})})}}]),s}(a.a.Component),K=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){return Object(d.a)(this,s),t.apply(this,arguments)}return Object(p.a)(s,[{key:"render",value:function(){return Object(n.jsx)("div",{className:this.props.upload?"floatbtn-upload":"floatbtn",onClick:this.props.handleClick,children:Object(n.jsx)("span",{className:this.props.upload?"floatbtn-icon fa fa-upload":"floatbtn-icon fa fa-plus"})})}}]),s}(a.a.Component),Z=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){var e;return Object(d.a)(this,s),(e=t.call(this)).addRound=function(){var t=Object(u.a)(l.a.mark((function t(s){var n,r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/rounds/"+e.props.userObj.id,t.next=3,fetch(n,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(s)});case 3:return r=t.sent,t.next=6,r.text();case 6:a=t.sent,200!=r.status?(e.setState({errorMsg:a}),e.props.changeMode(m.ROUNDS)):(e.setState({errorMsg:""}),e.props.refreshOnUpdate(m.ROUNDS));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.editRound=function(){var t=Object(u.a)(l.a.mark((function t(s){var n,r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/rounds/"+e.props.userObj.id+"/"+e.props.userObj.rounds[e.editId]._id,t.next=3,fetch(n,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify(s)});case 3:return r=t.sent,t.next=6,r.text();case 6:a=t.sent,200!=r.status?(e.setState({errorMsg:a}),e.props.changeMode(m.ROUNDS)):e.props.refreshOnUpdate(m.ROUNDS);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.deleteRound=Object(u.a)(l.a.mark((function t(){var s,n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="/rounds/"+e.props.userObj.id+"/"+e.props.userObj.rounds[e.deleteId]._id,t.next=3,fetch(s,{method:"DELETE"});case 3:return n=t.sent,t.next=6,n.text();case 6:r=t.sent,200!=n.status?(e.setState({errorMsg:"An error occurred when attempting to delete round from database: "+r}),e.props.changeMode(m.ROUNDS)):e.props.refreshOnUpdate(m.ROUNDS);case 8:case"end":return t.stop()}}),t)}))),e.setDeleteId=function(t){e.deleteId=t,e.setState({errorMsg:""})},e.setEditId=function(t){e.editId=t,e.setState({errorMsg:""})},e.closeErrorMsg=function(){e.setState({errorMsg:""})},e.deleteId="",e.editId="",e.state={errorMsg:""},e}return Object(p.a)(s,[{key:"render",value:function(){var e=this;switch(this.props.mode){case m.ROUNDS:return Object(n.jsxs)(n.Fragment,{children:[""!=this.state.errorMsg?Object(n.jsxs)("div",{className:"status-msg",children:[Object(n.jsx)("span",{children:this.state.errorMsg}),Object(n.jsx)("button",{className:"modal-close",onClick:this.closeErrorMsg,children:Object(n.jsx)("span",{className:"fa fa-times"})})]}):null,Object(n.jsx)(H,{rounds:this.props.userObj.rounds,setEditId:this.setEditId,setDeleteId:this.setDeleteId,deleteRound:this.deleteRound,changeMode:this.props.changeMode,menuOpen:this.props.menuOpen}),Object(n.jsx)(K,{handleClick:function(){return e.props.changeMode(m.ROUNDS_LOGROUND)},menuOpen:this.props.menuOpen,icon:"fa fa-plus"})]});case m.ROUNDS_LOGROUND:return Object(n.jsx)(J,{mode:this.props.mode,startData:"",saveRound:this.addRound});case m.ROUNDS_EDITROUND:var t=Object(D.a)({},this.props.userObj.rounds[this.editId]);return t.date=t.date.substr(0,10),t.seconds<10&&(t.seconds="0"+t.seconds),delete t.SGS,Object(n.jsx)(J,{mode:this.props.mode,startData:t,saveRound:this.editRound})}}}]),s}(a.a.Component),W=s(15),$=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var r;return Object(d.a)(this,s),(r=t.call(this,e)).editStudent=function(e){console.log("Editing student: "+e)},r.deleteStudent=function(e){console.log("Deleting student: "+e)},r.renderTable=function(){var e=[],t=function(t){e.push(Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:r.props.students[t].userID}),Object(n.jsx)("td",{children:r.props.students[t].studentDisplayName}),"Instructor"===r.props.userType?Object(n.jsxs)("div",{className:"instructor-buttons",children:[Object(n.jsx)("td",{children:Object(n.jsx)("button",{onClick:r.props.menuOpen?null:function(){return r.editStudent(r.props.students[t].userID)},children:Object(n.jsx)("span",{className:"fa fa-pencil-square-o"})})}),Object(n.jsx)("td",{children:Object(n.jsx)("button",{onClick:r.props.menuOpen?null:function(){return r.deleteStudent(r.props.students[t].userID)},children:Object(n.jsx)("span",{className:"fa fa-trash-o"})})})]}):null]},t))};for(var s in r.props.students)t(s);return e},r}return Object(p.a)(s,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"padded-page",children:[Object(n.jsx)("h1",{}),Object(n.jsxs)("table",{id:"StudentsTable",className:"table table-hover",children:[Object(n.jsx)("thead",{className:"thead-light",children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"ID"}),"Instructor"===this.props.userType?Object(n.jsxs)("div",{className:"instructor-buttons",children:[Object(n.jsx)("th",{children:"Edit"}),Object(n.jsx)("th",{children:"Delete"})]}):null]})}),Object(n.jsx)("tbody",{children:0===Object.keys(this.props.students).length?Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"5",style:{fontStyle:"italic"},children:"There aren't any students in this course"})}):this.renderTable()})]})]})}}]),s}(a.a.Component),X=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).handleCloseModal=function(e){e.preventDefault(),n.props.changeMode(m.COURSES)},n.handleDelete=function(e){e.preventDefault(),n.props.deleteCourse(n.props.courseId)},n}return Object(p.a)(s,[{key:"render",value:function(){return Object(n.jsx)("div",{id:"aboutModal",className:"modal",role:"dialog",children:Object(n.jsxs)("div",{id:"ConfirmCourseDeleteModal",className:"modal-content",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("center",{children:Object(n.jsx)("h3",{className:"modal-title",children:Object(n.jsxs)("b",{children:["Are you sure you'd like to delete ",this.props.courseName,"?"]})})}),Object(n.jsx)("button",{id:"modalClose",className:"modal-close",onClick:this.handleCloseModal,children:"\xd7"})]}),Object(n.jsx)("div",{className:"modal-body",children:Object(n.jsxs)("form",{onSubmit:this.handleDelete,children:[Object(n.jsx)("button",{role:"submit",className:"btn btn-primary",children:"Confirm"}),Object(n.jsx)("button",{className:"btn btn-secondary",onClick:this.handleCloseModal,children:"Cancel"}),Object(n.jsx)("br",{})]})})]})})}}]),s}(a.a.Component),ee=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).handleCloseModal=function(e){e.preventDefault(),n.props.changeMode(m.COURSES)},n.handleEditSubmit=function(e){e.preventDefault();var t={courseInstructorFirstName:n.state.instructorFirstName,courseInstructorLastName:n.state.instructorLastName,courseInstructorID:n.props.instructorId,courseName:n.state.name,courseNumber:n.state.number,courseYear:n.state.year,courseSemester:n.state.semester,courseEnrollmentLimit:n.state.enrollmentLimit,courseCurrentlyEnrolled:n.state.currentlyEnrolled,courseID:n.state.id,courseNotes:n.state.notes};n.props.editCourse(t),n.props.changeMode(m.COURSES)},n.handleChange=function(e){var t=e.target.name;if("number"===t||"semester"===t||"year"===t){var s=n.numberRef.current.value+n.semesterRef.current.value+n.yearRef.current.value;n.setState({id:s})}n.setState(Object(y.a)({},t,e.target.value))},n.numberRef=a.a.createRef(),n.semesterRef=a.a.createRef(),n.yearRef=a.a.createRef(),n.state={name:"",number:"",id:"",semester:"",year:"",instructorFirstName:"",instructorLastName:"",enrollmentLimit:"",currentlyEnrolled:"",notes:""},n.componentDidMount=n.componentDidMount.bind(Object(g.a)(n)),n}return Object(p.a)(s,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,s,n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/courses/"+this.props.userId,e.next=3,fetch(t);case 3:return s=e.sent,e.next=6,s.json();case 6:n=e.sent,r=JSON.parse(n),a=(a=r.filter(function(e){return e.courseID===this.props.courseId}.bind(this)))[0],this.setState({instructorFirstName:a.courseInstructorFirstName,instructorLastName:a.courseInstructorLastName,name:a.courseName,number:a.courseNumber,year:a.courseYear,semester:a.courseSemester,enrollmentLimit:a.courseEnrollmentLimit,currentlyEnrolled:a.courseCurrentlyEnrolled,id:a.courseID,notes:a.courseNotes});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(n.jsx)("div",{id:"aboutModal",className:"modal",role:"dialog",children:Object(n.jsxs)("div",{id:"AddCourseModal",className:"modal-content",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("center",{children:Object(n.jsx)("h3",{className:"modal-title",children:Object(n.jsxs)("b",{children:["Edit ",this.props.courseName]})})}),Object(n.jsx)("button",{id:"modalClose",className:"modal-close",onClick:this.handleCloseModal,children:"\xd7"})]}),Object(n.jsx)("div",{className:"modal-body",children:Object(n.jsxs)("form",{onSubmit:this.handleEditSubmit,children:[Object(n.jsxs)("label",{children:["Course Name:",Object(n.jsx)("br",{}),Object(n.jsx)("input",{name:"name",className:"form-control form-center",type:"text",value:this.state.name,onChange:this.handleChange,placeholder:"Course name",size:"50",maxLength:"50",required:!0})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Course Number:",Object(n.jsx)("br",{}),Object(n.jsx)("input",{name:"number",className:"form-control form-center",type:"text",value:this.state.number,onChange:this.handleChange,ref:this.numberRef,placeholder:"Course number",size:"50",maxLength:"50",required:!0})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Term:",Object(n.jsx)("br",{}),Object(n.jsx)("input",{name:"semester",className:"form-control form-center",type:"text",value:this.state.semester,onChange:this.handleChange,ref:this.semesterRef,placeholder:"Current term",size:"50",maxLength:"50",required:!0})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Year:",Object(n.jsx)("br",{}),Object(n.jsx)("input",{name:"year",className:"form-control form-center",type:"text",value:this.state.year,onChange:this.handleChange,ref:this.yearRef,placeholder:"Current year",size:"50",maxLength:"50",required:!0})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Instructor First Name:",Object(n.jsx)("br",{}),Object(n.jsx)("input",{name:"instructorFirstName",className:"form-control form-center",type:"text",value:this.state.instructorFirstName,onChange:this.handleChange,placeholder:"First name",size:"50",maxLength:"50",required:!0})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Instructor Last Name:",Object(n.jsx)("br",{}),Object(n.jsx)("input",{name:"instructorLastName",className:"form-control form-center",type:"text",value:this.state.instructorLastName,onChange:this.handleChange,placeholder:"Last name",size:"50",maxLength:"50",required:!0})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Enrollment Limit:",Object(n.jsx)("br",{}),Object(n.jsx)("input",{name:"enrollmentLimit",className:"form-control form-center",type:"text",value:this.state.enrollmentLimit,onChange:this.handleChange,placeholder:"Enrollment limit",size:"50",maxLength:"50",required:!0})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Notes:",Object(n.jsx)("textarea",{name:"notes",className:"form-control",rows:"6",cols:"75",placeholder:"Enter course notes",value:this.state.notes,onChange:this.handleChange})]}),Object(n.jsx)("p",{}),Object(n.jsx)("p",{}),Object(n.jsxs)("div",{className:"modal-footer",children:[Object(n.jsx)("button",{role:"submit",className:"btn btn-primary",children:"Edit"}),Object(n.jsx)("button",{className:"btn btn-secondary",onClick:this.handleCloseModal,children:"Cancel"})]}),Object(n.jsx)("br",{})]})})]})})}}]),s}(a.a.Component),te=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var r;return Object(d.a)(this,s),(r=t.call(this,e)).viewStudents=function(e,t){console.log("Opening students for courseId: "+e),r.props.changeCourse(e,t),r.props.changeMode(m.STUDENTS)},r.handleEditCourse=function(e,t){console.log("Editing "+e),r.setState({courseId:e,courseName:t}),r.props.changeMode(m.COURSES_EDIT)},r.handleDeleteCourse=function(e,t){console.log("Deleting "+e),r.setState({courseId:e,courseName:t}),r.props.changeMode(m.COURSES_DELETE)},r.deleteCourse=function(){var e=Object(u.a)(l.a.mark((function e(t){var s,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="/courses/"+r.props.userId+"/"+t,e.next=3,fetch(s,{method:"DELETE"});case 3:if(200!=(n=e.sent).status){e.next=8;break}console.log("Successfully deleted course"),e.next=12;break;case 8:return e.next=10,n.text();case 10:a=e.sent,console.log("Course deletion failed with error: "+a);case 12:r.props.changeMode(m.COURSES);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.editCourse=function(){var e=Object(u.a)(l.a.mark((function e(t){var s,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),s="/courses/"+r.props.userId+"/"+r.state.courseId,e.next=4,fetch(s,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify(t)});case 4:return n=e.sent,e.next=7,n.text();case 7:e.sent,200!=n.status?console.log("Course successfully updated"):console.log("Error occurred while updating course");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.renderTable=function(){var e=[],t=function(t){e.push(Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:r.props.courses[t].courseName}),Object(n.jsx)("td",{children:r.props.courses[t].courseYear}),Object(n.jsx)("td",{children:r.props.courses[t].courseSemester}),Object(n.jsx)("td",{children:r.props.courses[t].courseInstructorFirstName+" "+r.props.courses[t].courseInstructorLastName}),Object(n.jsx)("td",{children:Object(n.jsx)("button",{onClick:r.props.menuOpen?null:function(){return r.viewStudents(r.props.courses[t].courseID,r.props.courses[t].courseName)},children:Object(n.jsx)("span",{id:"studentView",className:"fa fa-users"})})}),"Instructor"===r.props.userType?Object(n.jsxs)("div",{className:"instructor-buttons",children:[Object(n.jsx)("td",{children:Object(n.jsx)("button",{onClick:r.props.menuOpen?null:function(){return r.handleEditCourse(r.props.courses[t].courseID,r.props.courses[t].courseName)},children:Object(n.jsx)("span",{className:"fa fa-pencil-square-o"})})}),Object(n.jsx)("td",{children:Object(n.jsx)("button",{onClick:r.props.menuOpen?null:function(){return r.handleDeleteCourse(r.props.courses[t].courseID,r.props.courses[t].courseName)},children:Object(n.jsx)("span",{className:"fa fa-trash-o"})})})]}):null]},t))};for(var s in r.props.courses)t(s);return e},r.state={courseId:"",courseName:""},r}return Object(p.a)(s,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"padded-page",children:[Object(n.jsx)("h1",{}),Object(n.jsxs)("table",{id:"CoursesTable",className:"table table-hover",children:[Object(n.jsx)("thead",{className:"thead-light",children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Course Name"}),Object(n.jsx)("th",{children:"Year"}),Object(n.jsx)("th",{children:"Semester"}),Object(n.jsx)("th",{children:"Instructor Name"}),Object(n.jsx)("th",{children:"View Students"}),"Instructor"===this.props.userType?Object(n.jsxs)("div",{className:"instructor-buttons",children:[Object(n.jsx)("th",{children:"Edit"}),Object(n.jsx)("th",{children:"Delete"})]}):null]})}),Object(n.jsx)("tbody",{children:0===Object.keys(this.props.courses).length?Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"5",style:{fontStyle:"italic"},children:"You don't have any courses"})}):this.renderTable()})]}),this.props.mode===m.COURSES_DELETE?Object(n.jsx)(X,{changeMode:this.props.changeMode,deleteCourse:this.deleteCourse,courseId:this.state.courseId,courseName:this.state.courseName}):null,this.props.mode===m.COURSES_EDIT?Object(n.jsx)(ee,{changeMode:this.props.changeMode,editCourse:this.editCourse,courseName:this.state.courseName,courseId:this.state.courseId,userId:this.props.userId}):null]})}}]),s}(a.a.Component),se=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).handleCloseModal=function(e){e.preventDefault(),n.props.changeMode(m.STUDENTS)},n.handleFile=function(e){window.FileReader&&n.getAsText(n.rosterRef.current.files[0])},n.handleUploadSubmit=function(e){e.preventDefault(),n.props.uploadStudents(n.state.roster),n.props.changeMode(m.STUDENTS)},n.rosterRef=a.a.createRef(),n.fileReadingFinished=n.fileReadingFinished.bind(Object(g.a)(n)),n.state={roster:[]},n}return Object(p.a)(s,[{key:"getAsText",value:function(e){var t=new FileReader;t.readAsText(e),t.onload=this.fileReadingFinished,t.onerror=this.errorHandler}},{key:"fileReadingFinished",value:function(e){var t=e.target.result.split(/\r\n|\n/),s=(t=t.filter((function(e){return"userID,displayName"!==e&&""!==e}))).map((function(e){return e.split(";")}));s=s.map((function(e,t){return e=e[0].split(",")})),this.setState({roster:s})}},{key:"errorHandler",value:function(e){"NotReadableError"===e.target.error.name&&alert("Cannot read file!")}},{key:"render",value:function(){return Object(n.jsx)("div",{id:"aboutModal",className:"modal",role:"dialog",children:Object(n.jsxs)("div",{id:"UploadStudentsModal",className:"modal-content",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("center",{children:Object(n.jsx)("h3",{className:"modal-title",children:Object(n.jsx)("b",{children:"Upload Students"})})}),Object(n.jsx)("button",{id:"modalClose",className:"modal-close",onClick:this.handleCloseModal,children:"\xd7"})]}),Object(n.jsxs)("div",{className:"modal-body",children:[Object(n.jsxs)("p",{children:["Add multiple students to this course at once by using uploading a class roster CSV file. Each student entry needs a userID and DisplayName column.",Object(n.jsx)("br",{})]}),Object(n.jsxs)("form",{onSubmit:this.handleUploadSubmit,children:[Object(n.jsxs)("label",{children:["Select a Roster File:",Object(n.jsx)("br",{}),Object(n.jsx)("input",{className:"form-control form-text form-center",name:"roster",type:"file",accept:".csv",required:!0,ref:this.rosterRef,value:this.state.rosterFileName,onChange:this.handleFile})]}),Object(n.jsxs)("div",{className:"modal-footer",children:[Object(n.jsx)("button",{role:"submit",className:"btn btn-primary",children:"Upload"}),Object(n.jsx)("button",{className:"btn btn-secondary",onClick:this.handleCloseModal,children:"Cancel"})]}),Object(n.jsx)("br",{})]})]})]})})}}]),s}(a.a.Component),ne=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).handleCloseModal=function(e){e.preventDefault(),n.props.changeMode(m.COURSES)},n.handleCreateSubmit=function(e){e.preventDefault();var t={courseInstructorFirstName:n.state.instructorFirstName,courseInstructorLastName:n.state.instructorLastName,courseInstructorID:n.props.instructorId,courseName:n.state.name,courseNumber:n.state.number,courseYear:n.state.year,courseSemester:n.state.semester,courseEnrollmentLimit:n.state.enrollmentLimit,courseCurrentlyEnrolled:"0",courseID:n.state.id,courseNotes:n.state.notes};n.props.addCourse(t),n.props.changeMode(m.COURSES)},n.handleChange=function(e){var t=e.target.name;if("number"===t||"semester"===t||"year"===t){var s=n.numberRef.current.value+n.semesterRef.current.value+n.yearRef.current.value;n.setState({id:s})}n.setState(Object(y.a)({},t,e.target.value))},n.numberRef=a.a.createRef(),n.semesterRef=a.a.createRef(),n.yearRef=a.a.createRef(),n.state={name:"",number:"",id:"",semester:"",year:"",instructorFirstName:"",instructorLastName:"",enrollmentLimit:"",notes:""},n}return Object(p.a)(s,[{key:"render",value:function(){return Object(n.jsx)("div",{id:"aboutModal",className:"modal",role:"dialog",children:Object(n.jsxs)("div",{id:"AddCourseModal",className:"modal-content",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("center",{children:Object(n.jsx)("h3",{className:"modal-title",children:Object(n.jsx)("b",{children:"Create a Course"})})}),Object(n.jsx)("button",{id:"modalClose",className:"modal-close",onClick:this.handleCloseModal,children:"\xd7"})]}),Object(n.jsxs)("div",{className:"modal-body",children:[Object(n.jsxs)("p",{children:["Create a new course to send surveys to. After you have created a course, you can add students to it.",Object(n.jsx)("br",{})]}),Object(n.jsxs)("form",{onSubmit:this.handleCreateSubmit,children:[Object(n.jsxs)("label",{children:["Course Name:",Object(n.jsx)("br",{}),Object(n.jsx)("input",{name:"name",id:"courseName",className:"form-control form-center",type:"text",value:this.state.name,onChange:this.handleChange,placeholder:"Course name",size:"50",maxLength:"50",required:!0})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Course Number:",Object(n.jsx)("br",{}),Object(n.jsx)("input",{name:"number",id:"courseNumber",className:"form-control form-center",type:"text",value:this.state.number,onChange:this.handleChange,ref:this.numberRef,placeholder:"Course number",size:"50",maxLength:"50",required:!0})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Term:",Object(n.jsx)("br",{}),Object(n.jsx)("input",{name:"semester",id:"courseSemester",className:"form-control form-center",type:"text",value:this.state.semester,onChange:this.handleChange,ref:this.semesterRef,placeholder:"Current term",size:"50",maxLength:"50",required:!0})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Year:",Object(n.jsx)("br",{}),Object(n.jsx)("input",{name:"year",id:"courseYear",className:"form-control form-center",type:"text",value:this.state.year,onChange:this.handleChange,ref:this.yearRef,placeholder:"Current year",size:"50",maxLength:"50",required:!0})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Instructor First Name:",Object(n.jsx)("br",{}),Object(n.jsx)("input",{name:"instructorFirstName",id:"courseFirstName",className:"form-control form-center",type:"text",value:this.state.instructorFirstName,onChange:this.handleChange,placeholder:"First name",size:"50",maxLength:"50",required:!0})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Instructor Last Name:",Object(n.jsx)("br",{}),Object(n.jsx)("input",{name:"instructorLastName",id:"courseLastName",className:"form-control form-center",type:"text",value:this.state.instructorLastName,onChange:this.handleChange,placeholder:"Last name",size:"50",maxLength:"50",required:!0})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Enrollment Limit:",Object(n.jsx)("br",{}),Object(n.jsx)("input",{name:"enrollmentLimit",id:"courseEnrollmentLimit",className:"form-control form-center",type:"text",value:this.state.enrollmentLimit,onChange:this.handleChange,placeholder:"Enrollment limit",size:"50",maxLength:"50",required:!0})]}),Object(n.jsx)("p",{}),Object(n.jsxs)("label",{children:["Notes:",Object(n.jsx)("textarea",{name:"notes",id:"courseNotes",className:"form-control",rows:"6",cols:"75",placeholder:"Enter course notes",value:this.state.notes,onChange:this.handleChange})]}),Object(n.jsx)("p",{}),Object(n.jsx)("p",{}),Object(n.jsxs)("div",{className:"modal-footer",children:[Object(n.jsx)("button",{role:"submit",id:"saveCourse",className:"btn btn-primary",children:"Create"}),Object(n.jsx)("button",{id:"cancelCourse",className:"btn btn-secondary",onClick:this.handleCloseModal,children:"Cancel"})]}),Object(n.jsx)("br",{})]})]})]})})}}]),s}(a.a.Component),re=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).handleChangeMode=function(e){n.setState({mode:e})},n.handleChangeCourse=function(){var e=Object(u.a)(l.a.mark((function e(t,s){var r,a,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({courseId:t,courseName:s}),r="/students/"+t,e.next=4,fetch(r,{method:"GET"});case 4:if(200==(a=e.sent).status){e.next=11;break}return e.next=8,a.text();case 8:return o=e.sent,console.log("There was an error obtaining students in this course: "+o),e.abrupt("return");case 11:return e.next=13,a.json();case 13:c=e.sent,c=JSON.parse(c),console.log("in componentDidMount with GET results: "+c),n.setState({students:c});case 17:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),n.handleAddCourse=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.changeMode(m.COURSES_CREATE);case 1:case"end":return e.stop()}}),e)}))),n.handleAddStudent=function(){console.log("Adding a student"),n.props.changeMode(m.STUDENTS_CREATE)},n.handleUploadStudents=function(){n.props.changeMode(m.STUDENTS_UPLOAD)},n.uploadStudents=function(){var e=Object(u.a)(l.a.mark((function e(t){var s,r,a,o,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=Object(W.a)(t),e.prev=1,s.s();case 3:if((r=s.n()).done){e.next=16;break}return a=r.value,o={userID:a[0],studentDisplayName:a[1]},c="/students/"+n.state.courseId,e.next=9,fetch(c,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(o)});case 9:return i=e.sent,e.next=12,i.text();case 12:e.sent,200!=i.status?console.log("Successfully added students"):console.log("Error adding students");case 14:e.next=3;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),s.e(e.t0);case 21:return e.prev=21,s.f(),e.finish(21);case 24:n.handleChangeCourse(n.state.courseId,n.state.courseName);case 25:case"end":return e.stop()}}),e,null,[[1,18,21,24]])})));return function(t){return e.apply(this,arguments)}}(),n.addStudent=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Adding a student for course: "+n.state.courseId);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.addCourse=function(){var e=Object(u.a)(l.a.mark((function e(t){var s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Creating a new course: "+t),s="/courses/"+n.props.userObj.id,e.next=4,fetch(s,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)});case 4:return r=e.sent,e.next=7,r.text();case 7:e.sent,200!=r.status?console.log("Successfully added course"):console.log("Error adding course");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={courseId:"",courseName:"",students:[]},n}return Object(p.a)(s,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"padded-page",children:[Object(n.jsxs)("center",{children:[Object(n.jsx)("h1",{children:this.props.mode===m.COURSES||this.props.mode===m.COURSES_DELETE||this.props.mode===m.COURSES_EDIT||this.props.mode===m.COURSES_CREATE?"Courses":"Students in "+this.state.courseName}),this.props.mode===m.COURSES||this.props.mode===m.COURSES_DELETE||this.props.mode===m.COURSES_EDIT||this.props.mode===m.COURSES_CREATE?Object(n.jsx)(te,{courses:this.props.userObj.courses,userType:this.props.userObj.userType,menuOpen:this.props.menuOpen,changeMode:this.props.changeMode,mode:this.props.mode,userId:this.props.userObj.id,changeCourse:this.handleChangeCourse}):Object(n.jsx)($,{students:this.state.students,userType:this.props.userObj.userType,menuOpen:this.props.menuOpen,changeMode:this.props.changeMode})]}),"Instructor"===this.props.userObj.userType&&this.props.mode===m.STUDENTS?Object(n.jsxs)("div",{className:"floatingbtn-container",children:[Object(n.jsx)(K,{id:"AddStudentBtn",handleClick:this.handleAddStudent}),Object(n.jsx)(K,{id:"UploadStudentsBtn",handleClick:this.handleUploadStudents,upload:!0})]}):null,"Instructor"===this.props.userObj.userType&&this.props.mode===m.COURSES?Object(n.jsx)(K,{id:"AddCourseBtn",handleClick:this.handleAddCourse}):null,this.props.mode===m.STUDENTS_UPLOAD?Object(n.jsx)(se,{uploadStudents:this.uploadStudents,changeMode:this.props.changeMode}):null,this.props.mode===m.COURSES_CREATE?Object(n.jsx)(ne,{changeMode:this.props.changeMode,addCourse:this.addCourse,instructorId:this.props.userObj.id}):null]})}}]),s}(a.a.Component),ae=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){return Object(d.a)(this,s),t.apply(this,arguments)}return Object(p.a)(s,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"modal",role:"dialog",children:Object(n.jsx)("div",{className:"modal-dialog modal-lg",children:Object(n.jsxs)("div",{className:"modal-content",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("h3",{children:"About SpeedScore"}),Object(n.jsx)("button",{className:"modal-close",onClick:this.props.close,children:"\xd7"})]}),Object(n.jsxs)("div",{className:"modal-body",children:[Object(n.jsx)("img",{src:"https://dl.dropboxusercontent.com/s/awuwr1vpuw1lkyl/SpeedScore4SplashLogo.png",height:"200",width:"200"}),Object(n.jsx)("h3",{children:"The World's First and Only Suite of Apps for Speedgolf"}),Object(n.jsxs)("p",{children:["Version CptS 489 Fa20 Complete (MERN)",Object(n.jsx)("br",{}),"\xa9 2017-20 The Professor of Speedgolf. All rights reserved."]}),Object(n.jsxs)("div",{style:{textAlign:"left"},children:[Object(n.jsx)("p",{children:"SpeedScore apps support"}),Object(n.jsxs)("ul",{children:[Object(n.jsxs)("li",{children:["live touranment scoring (",Object(n.jsx)("i",{children:"SpeedScore Live\xae"}),")"]}),Object(n.jsxs)("li",{children:["tracking personal speedgolf rounds and sharing results (",Object(n.jsx)("i",{children:"SpeedScore Track\xae"}),")"]}),Object(n.jsxs)("li",{children:["finding speedgolf-friendly courses, booking tee times, and paying to play speedgolf by the minute (",Object(n.jsx)("i",{children:"SpeedScore Play\xae"}),")"]})]}),Object(n.jsxs)("p",{children:["SpeedScore was first developed by Dr. Chris Hundhausen, associate professor of computer science at Washington State University and the ",Object(n.jsx)("i",{children:"Professor of Speedgolf"}),", with support from Scott Dawley, CEO of Speedgolf USA, LLC."]}),Object(n.jsxs)("p",{children:["For more information on SpeedScore, visit ",Object(n.jsx)("a",{href:"http://speedscore.live",target:"_blank",children:"SpeedScore's web site"}),". For more information on speedgolf, visit ",Object(n.jsx)("a",{href:"http://playspeedgolf.com",target:"_blank",children:"playspeedgolf.com"})," and ",Object(n.jsx)("a",{href:"http://usaspeedgolf.com",target:"_blank",children:"Speedgolf USA"}),"."]})]})]}),Object(n.jsx)("div",{className:"modal-footer",children:Object(n.jsx)("button",{className:"btn btn-primary btn-color-theme",onClick:this.props.close,children:"OK"})})]})})})}}]),s}(a.a.Component),oe={};oe[m.LOGIN]="Welcome to Kliks",oe[m.SURVEY_MANAGEMENT]="Survey Management",oe[m.ROUNDS]="My Rounds",oe[m.ROUNDS_LOGROUND]="Log New Round",oe[m.ROUNDS_EDITROUND]="Edit Round",oe[m.COURSES]="Courses",oe[m.COURSES_CREATE]="Add Course",oe[m.COURSES_DELETE]="Delete Course",oe[m.COURSES_EDIT]="Edit Course",oe[m.STUDENTS]="Students",oe[m.STUDENTS_CREATE]="Add a Student",oe[m.STUDENTS_UPLOAD]="Students";var ce={};ce[m.LOGIN]=w,ce[m.SURVEY_MANAGEMENT]=z,ce[m.SURVEY_MANAGEMENT_RESPONSES]=z,ce[m.SURVEY_MANAGEMENT_CREATE]=z,ce[m.SURVEY_MANAGEMENT_EDIT]=z,ce[m.SURVEY_MANAGEMENT_CREATE_SURVEY]=z,ce[m.SURVEY_MANAGEMENT_SEARCH]=z,ce[m.SURVEY_MANAGEMENT_SEARCH_SURVEYS]=z,ce[m.ROUNDS]=Z,ce[m.ROUNDS_LOGROUND]=Z,ce[m.ROUNDS_EDITROUND]=Z,ce[m.COURSES]=re,ce[m.COURSES_CREATE]=re,ce[m.COURSES_DELETE]=re,ce[m.COURSES_EDIT]=re,ce[m.STUDENTS]=re,ce[m.STUDENTS_CREATE]=re,ce[m.STUDENTS_UPLOAD]=re;var ie=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){var e;return Object(d.a)(this,s),(e=t.call(this)).refreshOnUpdate=function(){var t=Object(u.a)(l.a.mark((function t(s){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/users/"+e.state.userObj.id);case 2:return n=t.sent,t.next=5,n.json();case 5:n=t.sent,r=JSON.parse(n),e.setState({userObj:r,mode:s});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChangeMode=function(t){e.setState({mode:t})},e.openMenu=function(){e.setState({menuOpen:!0})},e.closeMenu=function(){e.setState({menuOpen:!1})},e.toggleMenuOpen=function(){e.setState((function(e){return{menuOpen:!e.menuOpen}}))},e.setUserId=function(t){e.setState({userId:t,authenticated:!0})},e.showEditAccount=function(){e.setState({showEditAccountDialog:!0})},e.cancelEditAccount=function(){e.setState({showEditAccountDialog:!1})},e.editAccountDone=function(t,s){s?e.setState({showEditAccountDialog:!1,statusMsg:t,mode:m.LOGIN}):e.setState({showEditAccountDialog:!1,statusMsg:t})},e.closeStatusMsg=function(){e.setState({statusMsg:""})},e.state={mode:m.LOGIN,menuOpen:!1,authenticated:!1,userObj:{displayName:"",profilePicURL:""},editAccount:!1,showEditAccountDialog:!1,statusMsg:"",showAboutDialog:!1},e}return Object(p.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.state.authenticated||fetch("/auth/test").then((function(e){return e.json()})).then((function(t){t.isAuthenticated&&e.setState({userObj:t.user,authenticated:!0,mode:m.SURVEY_MANAGEMENT})}))}},{key:"render",value:function(){var e=this,t=ce[this.state.mode];return Object(n.jsxs)("div",{className:"padded-page",children:[this.state.showAboutDialog?Object(n.jsx)(ae,{close:function(){return e.setState({showAboutDialog:!1})}}):null,""!=this.state.statusMsg?Object(n.jsxs)("div",{className:"status-msg",children:[Object(n.jsx)("span",{children:this.state.statusMsg}),Object(n.jsx)("button",{className:"modal-close",onClick:this.closeStatusMsg,children:Object(n.jsx)("span",{className:"fa fa-times"})})]}):null,this.state.showEditAccountDialog?Object(n.jsx)(S,{create:!1,userId:this.state.userObj.id,done:this.editAccountDone,cancel:this.cancelEditAccount}):null,Object(n.jsx)(f,{title:oe[this.state.mode],mode:this.state.mode,changeMode:this.handleChangeMode,menuOpen:this.state.menuOpen,toggleMenuOpen:this.toggleMenuOpen}),Object(n.jsx)(x,{menuOpen:this.state.menuOpen,mode:this.state.mode,toggleMenuOpen:this.toggleMenuOpen,displayName:this.state.userObj.displayName,profilePicURL:this.state.userObj.profilePicURL,localAccount:"local"===this.state.userObj.authStrategy,editAccount:this.showEditAccount,logOut:function(){return e.handleChangeMode(m.LOGIN)},changeMode:this.handleChangeMode,showAbout:function(){e.setState({showAboutDialog:!0})},userType:this.state.userObj.userType}),Object(n.jsx)(v,{mode:this.state.mode,changeMode:this.handleChangeMode,menuOpen:this.state.menuOpen}),Object(n.jsx)(t,{menuOpen:this.state.menuOpen,mode:this.state.mode,changeMode:this.handleChangeMode,userObj:this.state.userObj,refreshOnUpdate:this.refreshOnUpdate})]})}}]),s}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(n.jsx)(ie,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[27,1,2]]]);
//# sourceMappingURL=main.bc3488b9.chunk.js.map